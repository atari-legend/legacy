<!doctype html>
<html>
<head>
	<meta name="description" content="Atari Legend : Legends never die!">
	<meta name="keywords" content="atari, atari st, games, game, demo, demos, reviews, articles, interviews, st">
	<title> Atari Legend | Legends Never Die</title>
	
	<!-- start - let the site behave like a mobile app on phone -->
	<meta name="mobile-web-app-capable" content="yes"><!-- Chrome-->
	<meta name="apple-mobile-web-app-capable" content="yes"><!-- apple -->
	<!-- End - let the site behave like a mobile app on phone -->
	<link rel="icon" href="intro/favicon.png"> <!-- fav icon -->
	<!-- start - get the icons used for mobile devices -->
	<link rel="apple-touch-icon-precomposed" sizes="57x57" href="intro/icon-57x57.png">
	<link rel="apple-touch-icon-precomposed" sizes="72x72" href="intro/icon-72x72.png">
	<link rel="apple-touch-icon-precomposed" sizes="114x114" href="intro/icon-114x114.png">
	<link rel="apple-touch-icon-precomposed" sizes="144x144" href="intro/icon-144x144.png">
	<!-- end - get the icons used for mobile devices -->  
    <script src="https://code.jquery.com/jquery-2.2.4.min.js"></script> 
    <script src="http://codef.santo.fr/codef/codef_core.js"></script> 
    <script src="http://codef.santo.fr/codef/codef_3d.js"></script> 
    <script src="http://codef.santo.fr/codef/codef_scrolltext.js"></script> 
    <script src="http://codef.santo.fr/codef/codef_music.js"></script> 
	<script src="http://codef.namwollem.co.uk/JS/howler.min.js"></script> 
    <script src="intro/cube.js"></script> 
    <script src="intro/extra.js"></script> 

    <script>
		
		//***********************************************************************//
		//This is the code used to play an MP3 in IE - No other way except MP3***//
		//***********************************************************************//
		//Create the audio tag
		var soundFile = document.createElement("audio");
		soundFile.preload = "auto";

		//Load the sound file (using a source element for expandability)
		var src = document.createElement("source");
		src.src = "intro/LTC1B2.mp3";
		soundFile.appendChild(src);

		var userAgent = navigator.userAgent || navigator.vendor || window.opera;
		var ua = window.navigator.userAgent;
		var msie = ua.indexOf("MSIE ");
						
		function play() {
		   //Set the current time for the audio file to the beginning
		   soundFile.currentTime = 0.01;
		   soundFile.volume = volume;

		   //Due to a bug in Firefox, the audio needs to be played after a delay
		   //setTimeout(function(){soundFile.play();},1);
		}
		//***********************************************************************//
		//End MP3 IE													      ***//
		//***********************************************************************//
		
		//***********************************************************************//
		//Scroller																*//
		//***********************************************************************//
		if (msie > 0 || !!navigator.userAgent.match(/Trident.*rv\:11\./))  
		{
			var text="OH? NO SWEET YM CHIPTUNES? ... HERE IT COMES!";
		}
		else if (/iPad|iPhone|iPod/.test(navigator.platform))
		{
			var text="OH? NO SWEET YM CHIPTUNES? ... HERE IT COMES!";
		}
		else
		{
			var text="WE ARE BACK!!!!";
		}
		text+="                           ";
		text+="ST GRAVEYARD AT THE KEYS HERE ... IS IT 2017 ALREADY? TIME FLIES...BUT LEGENDS NEVER DIE! AFTER ALMOST 10 YEARS OF INACTIVITY WE ARE FINALLY BACK ON THE WEB. THE FIRST SIGN OF LIFE. ";
		text+="WE HAVE BEEN WORKING SILENTLY FOR OVER 2 YEARS NOW ON A COMPLETELY NEW VERSION OF THE WEBSITE...ONCE YOU HAVE KIDS THESE KIND OF PROJECTS TAKE FOREVER TO COMPLETE!...";
		text+="WE PLAN TO BRING A FIRST VERSION TO THE PUBLIC HOPEFULLY SHORTLY AFTER THE SUMMER OF 2017. THIS RELEASE WILL CONTAIN ALL THE CONTENT OF THE ORIGINAL SITE  ...REVIEWS...INTERVIEWS...GAMES... ";
		text+="BUT IN A COMPLETELY NEW AND FULLY RESPONSIVE DESIGN ...ENJOY ATARI LEGEND ON YOUR SMARTPHONE... ";
		text+="OTHER FEATURES WILL BE ... AN OPEN CONTROL PANEL ... EXPORTABLE DATABASE ... THE FIRST STEPS HAVE BEEN MADE ... MORE SOCIAL MEDIA FEATURES. ";
		text+="BUT THERE WILL BE MORE IN LATER RELEASES ... MULTIPLE SKINS ... API ... MENU SECTION ... DEMO SECTION ... DOWNLOADS ... ";
		text+="WE HAVE A NEW VISION FOR ATARI LEGEND. WE WANT THIS PROJECT TO BE AS OPEN AS POSSIBLE AND USABLE IN OTHER ATARI RELATED PROJECTS! IF YOU WANT TO HELP OUT IN ANY WAY PLEASE GET IN TOUCH WITH US. ";
		text+="ATARI LEGEND ... A PROJECT BY SCENERS FOR THE SCENE! STAY TUNED. A BIG CHEERS TO DYNO FOR CREATING THIS COOL INTRO AND TAO AND TOMCHI FOR THE AMAZING TUNES! ";
		text+="INFERNAL HAILS TO ALL THE FINE PEOPLE OF THE ATARI ST SCENE. BUY THE AMAZING BOOK BREAKING THE BORDERS BY MARCO BREDDIN AT WWW.MICROZEIT.COM ... THIS IS STG ... SIGNING OFF ... ";
		text+="                            ";
		//***********************************************************************//
		//End scroller																*//
		//***********************************************************************//
		

        var // Screen parameters
            screen_width = 800,
            screen_height = 600,
            // Pictures
            back = new image('intro/back.png'),
            fuji = new image('intro/fuji.png'),
            logo = new image('intro/logo.png'),
            soon = new image('intro/soon.png'),
            font = new image('intro/text.png'),
            // Counters
            iteration = 0;
			
			
		//***********************************************************************//
		//This is the code used to play an MP3 in IOS
		//***********************************************************************//
		var basepath="intro/";
		var isReady=0;

		if (/iPad|iPhone|iPod/.test(navigator.platform)) {
			var tcbmusic = new Howl({
				src: [basepath + 'LTC1B2.mp3'],
				buffer: true,
				loop: true,
				autoplay: false,
				rate: 1,
				onload: function(){
					console.log("SAMPLE LOADED...");
					isReady++;

				}
			});
		}else{isReady=2;}
		//***********************************************************************//
		//End MP3 IOS													      ***//
		//***********************************************************************//

		var isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);

        /*===========*/
        /* Animation */
        /*===========*/
        function anim() {
            requestAnimFrame(anim);
            // Background
            back.draw(main_canvas, 0, 0, 1, 0, screen_width, 1);
            // Atari Legend Logo
            logo.draw(main_canvas, 139, 8);
            // Fuji Logo
            fuji.draw(main_canvas, 274, 296 - Math.round(Math.abs(150 * Math.sin(iteration / 20))), 0.5);
            // 3D Cube
            cube3d.group.rotation.x += 0.01;
            cube3d.group.rotation.y -= 0.03;
            cube3d.group.rotation.z += 0.02;
            cube3d.camera.position.x = 120 * Math.sin(iteration / 64);
            cube3d.draw();
            // Overlay text
            soon.print(main_canvas, "LEGENDS NEVER DIE!", 112, 528, 0.5);
            // Scrolltext
            scrolltext.draw(576);
            // Next frame
            iteration++;
        }
		
		
        /*=============*/
        /* Entry point */
        /*=============*/
        function init() {
            // Canvas
            main_canvas = new canvas(screen_width, screen_height, 'main');
            main_canvas.contex.imageSmoothingEnabled = false;
            main_canvas.contex.mozImageSmoothingEnabled = false;
            main_canvas.contex.oImageSmoothingEnabled = false;
            main_canvas.contex.webkitImageSmoothingEnabled = false;
			
			// IOS stuff
			var touchzone = document.getElementById("container");
			touchzone.addEventListener("touchstart", touchHandler, false);
			
			prego();
		}
		
		function touchHandler(event){
			isReady++;
		}
		
		function prego(){
			if (isReady>=2){
				go(); 
			} else {
				main_canvas.fill('#000000');

				main_canvas.contex.fillStyle="#FFFFFF";
				main_canvas.contex.font="64px Arial";
				//We need a touch on IOS devices else the music will not autoplay!
				if (/iPad|iPhone|iPod/.test(navigator.platform)) main_canvas.contex.fillText("PRESS TO BEGIN",120,220);
				requestAnimFrame( prego );
			}
		}


		function go(){
            // Font
            soon.initTile(32, 32, 32);
            // Scrolltext
            font.initTile(16, 16, 32);
            scrolltext = new scrolltext_horizontal();
            scrolltext.scrtxt = text;
            scrolltext.init(main_canvas, font, 2);
            // 3D Cube
            cube3d = new codef3D(main_canvas, 450, 60, 1, 1200);
            cube3d.faces4(cube_vertices, cube_faces, true, false);
            cube3d.addAmbiLight(0xFFFFFF);
            cube3d.addDirLight(0, 0, 1, 0xFFFFFF);
            // Music player or IOS devices
			if (/iPad|iPhone|iPod/.test(navigator.platform)) {
				//if (isReady==1){
				tcbmusic.play();
				//}
				//addEventListener('touchstart', function (e) {
				//	soundFile.load();
				//	soundFile.volume = 1.000000;
				//	soundFile.loop = true;
				//	soundFile.play();
				//});

			}
			//** IE sound file
			else if (msie > 0 || !!navigator.userAgent.match(/Trident.*rv\:11\./))  
			{
				soundFile.load();
				soundFile.volume = 1.000000;
				soundFile.loop=true;
				soundFile.play();
				
				//audioElement.addEventListener('ended', function() {
				//	this.currentTime = 0;
				//	this.play();
				//}, false);
			}
			//** sound in safari browser
			else if (isSafari)
			{
				soundFile.load();
				soundFile.volume = 1.000000;
				soundFile.loop = true;
				soundFile.play();
			}
			//** all others
			else{
				new music('YM').LoadAndRun('intro/music.ym');
			}
            // Start anim
            anim();
        }

    </script> 
    <style type="text/css">
        html, body, #container {
            overflow: hidden;
            width: 100%;
            height: 100%;
            margin: 0;
            background: black;
			background-image: url('intro/main_bg.png'), url('intro/main_bg.png');
        }
        #monitor {
            position: absolute;
            z-index: 2;
        }
        #main canvas {
            position: absolute;
            z-index: 1;
        }
        #main {
            position: absolute;
            background-color: black;
        }
    </style>
</head>
<body>
    <div id="container">
        <img id="monitor" src="intro/monitor.png" style="display:none" alt="">
        <div id="main"></div>
    </div>   
</body> 
</html>