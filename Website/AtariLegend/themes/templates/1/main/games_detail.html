{*
/***************************************************************************
*                                games_detail.html
*                            -----------------------------
*   begin                : Tuesday, August 1, 2017
*   copyright            : (C) 2017 Atari Legend
*   email                : martens_maarten@hotmail.com
*   actual update        : Creation of file
*
*   Id: games_detail.html,v 0.1 2017/08/01 19:08 STG
*
***************************************************************************/

//****************************************************************************************
// This is the game detail page
//****************************************************************************************
*}


{extends file='1/main/main.html'}
{block name=title}{$game_info.game_name} - Atari ST game | Atari Legend{/block}
{block name=description}{$game_description}{/block}
{block name=additional_scripts}
    <script src="{$template_dir}includes/js/vendor/jssor.slider-27.3.0.min.js"></script>

    <script> <!-- script used for the jquery screenshot and boxscan slider -->
        jQuery(document).ready(function ($) {

        //screenshot slider code
        var jssor_1_SlideshowTransitions = [
            {literal}{$Duration:1200,$Opacity:2}{/literal}
        ];

        var jssor_1_options = {
            $AutoPlay: 1,
            $SlideshowOptions: {
                $Class: $JssorSlideshowRunner$,
                $Transitions: jssor_1_SlideshowTransitions,
                $TransitionsOrder: 1
            },
            $ArrowNavigatorOptions: {
                $Class: $JssorArrowNavigator$
            },
            $BulletNavigatorOptions: {
                $Class: $JssorBulletNavigator$
            },
            $ThumbnailNavigatorOptions: {
                $Class: $JssorThumbnailNavigator$,
                {if $nr_screenshots < 10}
                    $Rows: 1,
                    $Align: 209,
                {else}
                    $Rows: 2,
                    $Align: 171,
                {/if}
                $SpacingX: 5,
                $SpacingY: 5,
                $Orientation: 2
            }
        };

        {if isset($screenshots)}
            var jssor_1_slider = new $JssorSlider$("jssor_1", jssor_1_options);
        {/if}

        {if isset($boxscan)}
            // boxscan slider code
            var jssor_2_SlideshowTransitions = [
                {literal}{$Duration:1200,$Opacity:2}{/literal}
            ];

            var jssor_2_options = {
                $AutoPlay: 1,
                $FillMode: 5,
                $SlideshowOptions: {
                    $Class: $JssorSlideshowRunner$,
                    $Transitions: jssor_1_SlideshowTransitions,
                    $TransitionsOrder: 1
                },
                $ArrowNavigatorOptions: {
                    $Class: $JssorArrowNavigator$
                },
                $ThumbnailNavigatorOptions: {
                    $Class: $JssorThumbnailNavigator$,
                    $Cols: 4,
                    $Align: 400
                }
            };

            var jssor_2_slider = new $JssorSlider$("jssor_2", jssor_2_options);
        {/if}

        /*#region responsive code begin*/
        function ScaleSlider() {
            {if isset($screenshots)}
                //for screenshots
                var containerElement = jssor_1_slider.$Elmt.parentNode;
                var containerWidth = containerElement.clientWidth;
                if (containerWidth) {
                    var MAX_WIDTH = 960;

                    var expectedWidth = containerWidth;

                    if (MAX_WIDTH) {
                        expectedWidth = Math.min(MAX_WIDTH, expectedWidth);
                    }

                    jssor_1_slider.$ScaleWidth(expectedWidth);
                }
                else {
                    window.setTimeout(ScaleSlider, 30);
                }
            {/if}

            {if isset($boxscan)}
            //for boxscans
                var containerElement2 = jssor_2_slider.$Elmt.parentNode;
                var containerWidth2 = containerElement2.clientWidth;
                if (containerWidth2) {
                    var MAX_WIDTH = 480;

                    var expectedWidth2 = containerWidth2;

                    if (MAX_WIDTH) {
                        expectedWidth2 = Math.min(MAX_WIDTH, expectedWidth2);
                    }

                    jssor_2_slider.$ScaleWidth(expectedWidth2);
                }
                else {
                    window.setTimeout(ScaleSlider, 30);
                }
            {/if}
        }

        ScaleSlider();
        $(window).bind("load", ScaleSlider);
        $(window).bind("resize", ScaleSlider);
        $(window).bind("orientationchange", ScaleSlider);
        /*#endregion responsive code end*/


        //API $Play, $Pause
        function Play() {
            jssor_1_slider.$Play();
        }

        function Pause() {
            jssor_1_slider.$Pause();
        }

        $("#play_jssor1").click(Play);
        $("#pause_jssor1").click(Pause);

        {if isset($boxscan)}
            function Play_box() {
                jssor_2_slider.$Play();
            }

            function Pause_box() {
                jssor_2_slider.$Pause();
            }

            $("#play_jssor2").click(Play_box);
            $("#pause_jssor2").click(Pause_box);
        {/if}
    });
    </script>

    <script src="{$template_dir}includes/js/vendor/lightbox-2.9.0.min.js"></script>

    <script>
        lightbox.option({
            'showImageNumberLabel': false
        })
    </script>

    {literal}
    <script> <!-- Comment tile scripts
    function CommentEditable(comment_id,user_id) {
        var string = "latest_comment_edit";
        var editable_comment = string.concat(comment_id);

        var string = "comment_edit_icon";
        var edit_icon = string.concat(comment_id);

        var string = "comment_save_icon";
        var save_icon = string.concat(comment_id);

        var string = "comment_input";
        var comment_input = string.concat(comment_id);

        var input = document.getElementById(comment_input);
        input.style.display='inline';

        var save = document.getElementById(save_icon);
        save.style.display='inline';

        var edit = document.getElementById(edit_icon);
        edit.style.display='none';

        var output = document.getElementById(editable_comment);
        output.style.display='none';
    }

    function SaveEditable(comment_id,user_id,game_id) {

        //It took me ages to get his to work because I'm a dipshit - I hate ajax --> ST Graveyard 14/07/2014 @fucking 00:44
        //Im not using contenteditable crap on a div because this way, loads of <br> statements are added in the Database.
        //So I'm changing the div to a text area, still, in java it seems a return is not sent to the server so I'm doing a conversion to <br>
        //Once the <br> are in the db, I do another conversion when I load the from the Database into an input field

        var string = "comment_input";
        var comment_data = string.concat(comment_id);

        var comment = document.getElementById(comment_data).value
        comment = comment.replace(/\n\r?/g, '<br />');

        var url = "../../main/games/db_games_main_detail.php?action=save_comment&comment_id="+comment_id+"&data="+comment+"&game_id="+game_id;

        if (comment_id == "")
        {
            document.getElementById("latest_comments_all").innerHTML = "";
            return;
        }
        else
        {
            if (window.XMLHttpRequest)
            {
                // code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp = new XMLHttpRequest();
            }
            else
            {
                // code for IE6, IE5
                xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
            }
            xmlhttp.onreadystatechange = function()
            {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200)
                {
                    document.getElementById("latest_comments_all").innerHTML = xmlhttp.responseText;
                }
            }
            xmlhttp.open("GET",url,true);
            xmlhttp.send();
        }
    }

    function DeleteEditable(comment_id,user_id,game_id) {

        // CONFIRM REQUIRES ONE ARGUMENT
        var message = "Are you sure you want to delete this comment?";
        // CONFIRM IS BOOLEAN. THAT MEANS THAT
        // IT RETURNS TRUE IF 'OK' IS CLICKED
        // OTHERWISE IT RETURN FALSE
        var return_value = confirm(message);

        if (return_value !="0")
        {
            if (comment_id == "")
                {
                    document.getElementById("latest_comments_all").innerHTML = "";
                    return;
                }
                else
                {
                    if (window.XMLHttpRequest)
                    {
                        // code for IE7+, Firefox, Chrome, Opera, Safari
                        xmlhttp = new XMLHttpRequest();
                    }
                    else
                    {
                        // code for IE6, IE5
                        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
                    }
                    xmlhttp.onreadystatechange = function()
                    {
                        if (xmlhttp.readyState == 4 && xmlhttp.status == 200)
                        {
                            document.getElementById("latest_comments_all").innerHTML = xmlhttp.responseText;
                        }
                    }
                    xmlhttp.open("GET","../../main/games/db_games_main_detail.php?action=delete_comment&comment_id="+comment_id+"&game_id="+game_id,true);
                    xmlhttp.send();
                }
            }
        }

        function AddComment(user_id,game_id) {

            //It took me ages to get his to work because I'm a dipshit - I hate ajax --> ST Graveyard 14/07/2014 @fucking 00:44
            //Im not using contenteditable crap on a div because this way, loads of <br> statements are added in the Database.
            //So I'm changing the div to a text area, still, in java it seems a return is not sent to the server so I'm doing a conversion to <br>
            //Once the <br> are in the db, I do another conversion when I load the from the Database into an input field

            var comment_data = "comment_add";;

            var comment = document.getElementById(comment_data).value
            comment = comment.replace(/\n\r?/g, '<br />');

            var url = "../../main/games/db_games_main_detail.php?action=add_comment&user_id="+user_id+"&data="+comment+"&game_id="+game_id;

            document.getElementById('comment_add').value = "";

            if (game_id == "")
            {
                document.getElementById("latest_comments_all").innerHTML = "";
                return;
            }
            else
            {
                if (window.XMLHttpRequest)
                {
                    // code for IE7+, Firefox, Chrome, Opera, Safari
                    xmlhttp = new XMLHttpRequest();
                }
                else
                {
                    // code for IE6, IE5
                    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
                }
                xmlhttp.onreadystatechange = function()
                {
                    if (xmlhttp.readyState == 4 && xmlhttp.status == 200)
                    {
                        document.getElementById("latest_comments_all").innerHTML = xmlhttp.responseText;
                    }
                }
                xmlhttp.open("GET",url,true);
                xmlhttp.send();
            }
        }
    </script>

    <script> <!-- all the code for the options of the textfield of the comment section -->
        var clientPC = navigator.userAgent.toLowerCase(); // Get client info
        var clientVer = parseInt(navigator.appVersion); // Get browser version

        var is_ie = ((clientPC.indexOf("msie") != -1) && (clientPC.indexOf("opera") == -1));
        var is_nav = ((clientPC.indexOf('mozilla')!=-1) && (clientPC.indexOf('spoofer')==-1)
                        && (clientPC.indexOf('compatible') == -1) && (clientPC.indexOf('opera')==-1)
                        && (clientPC.indexOf('webtv')==-1) && (clientPC.indexOf('hotjava')==-1));
        var is_moz = 0;

        var is_win = ((clientPC.indexOf("win")!=-1) || (clientPC.indexOf("16bit") != -1));
        var is_mac = (clientPC.indexOf("mac")!=-1);

        // Define the bbCode tags
        bbtags = new Array('[b]','[/b]','[i]','[/i]','[u]','[/u]','[url=www.yourlinkhere.com]','[/url]','[mail]','[/mail]', '[hotspotUrl=#]', '[/hotspotUrl]', '[hotspot=]', '[/hotspot]','[screenstar]','[/screenstar]','[frontpage]','[/frontpage]' );
        bbcode = new Array();
        imageTag = false;

        function bbstyle(bbnumber, bbname) {

            var txtarea = eval('document.post.' + bbname);

            txtarea.focus();
            donotinsert = false;
            theSelection = false;
            bblast = 0;

            if (bbnumber == -1) { // Close all open tags & default button names
                while (bbcode[0]) {
                    butnumber = arraypop(bbcode) - 1;
                    txtarea.value += bbtags[butnumber + 1];
                    buttext = eval('document.post.addbbcode' + butnumber + '.value');
                    eval('document.post.addbbcode' + butnumber + '.value ="' + buttext.substr(0,(buttext.length - 1)) + '"');
                }
                imageTag = false; // All tags are closed including image tags :D
                txtarea.focus();
                return;
            }

            if ((clientVer >= 4) && is_ie && is_win)
            {
                theSelection = document.selection.createRange().text; // Get text selection
                if (theSelection) {
                    // Add tags around selection
                    document.selection.createRange().text = bbtags[bbnumber] + theSelection + bbtags[bbnumber+1];
                    txtarea.focus();
                    theSelection = '';
                    return;
                }
            }
            else if (txtarea.selectionEnd && (txtarea.selectionEnd - txtarea.selectionStart > 0))
            {
                mozWrap(txtarea, bbtags[bbnumber], bbtags[bbnumber+1]);
                return;
            }

            // Find last occurance of an open tag the same as the one just clicked
            for (i = 0; i < bbcode.length; i++) {
                if (bbcode[i] == bbnumber+1) {
                    bblast = i;
                    donotinsert = true;
                }
            }

            if (donotinsert) {      // Close all open tags up to the one just clicked & default button names
                while (bbcode[bblast]) {
                        butnumber = arraypop(bbcode) - 1;
                        txtarea.value += bbtags[butnumber + 1];
                        buttext = eval('document.post.addbbcode' + butnumber + '.value');
                        eval('document.post.addbbcode' + butnumber + '.value ="' + buttext.substr(0,(buttext.length - 1)) + '"');
                        imageTag = false;
                    }
                    txtarea.focus();
                    return;
            } else { // Open tags

                if (imageTag && (bbnumber != 14)) {     // Close image tag before adding another
                    txtarea.value += bbtags[15];
                    lastValue = arraypop(bbcode) - 1;   // Remove the close image tag from the list
                    document.post.addbbcode14.value = "Img";    // Return button back to normal state
                    imageTag = false;
                }

                // Open tag
                txtarea.value += bbtags[bbnumber];
                if ((bbnumber == 14) && (imageTag == false)) imageTag = 1; // Check to stop additional tags after an unclosed image tag
                arraypush(bbcode,bbnumber+1);
                eval('document.post.addbbcode'+bbnumber+'.value += "*"');
                txtarea.focus();
                return;
            }
            storeCaret(txtarea);
        }

        // From http://www.massless.org/mozedit/
        function mozWrap(txtarea, open, close)
        {
            var selLength = txtarea.textLength;
            var selStart = txtarea.selectionStart;
            var selEnd = txtarea.selectionEnd;
            if (selEnd == 1 || selEnd == 2)
                selEnd = selLength;

            var s1 = (txtarea.value).substring(0,selStart);
            var s2 = (txtarea.value).substring(selStart, selEnd)
            var s3 = (txtarea.value).substring(selEnd, selLength);
            txtarea.value = s1 + open + s2 + close + s3;
            return;
        }

        // Insert at Claret position. Code from
        // http://www.faqts.com/knowledge_base/view.phtml/aid/1052/fid/130
        function storeCaret(textEl) {
            if (textEl.createTextRange) textEl.caretPos = document.selection.createRange().duplicate();
        }
    </script>
    {/literal}

    <script src="{$template_dir}includes/js/vendor/jquery.dotdotdot-1.8.3.min.js"></script> <!--this script is used for the elipsis (...) effect of the preview of the reviews -->
    <script>
        jQuery(document).ready(function () {
            $(".game_details_review_preview_text").dotdotdot({  // This is the script to truncate the preview of the reviews-->
                    //  configuration goes here

                /*  The text to add as ellipsis. */
                ellipsis    : '... ',

                /*  How to cut off the text/html: 'word'/'letter'/'children' */
                wrap        : 'word',

                /*  Wrap-option fallback to 'letter' for long words */
                fallbackToLetter: false,

                /*  jQuery-selector for the element to keep and put after the ellipsis. */
                after       : null,

                /*  Whether to update the ellipsis: true/'window' */
                watch       : window,

                /*  Optionally set a max-height, can be a number or function.
                    If null, the height will be measured. */
                height      : null,

                /*  Deviation for the height-option. */
                tolerance   : 0,

                /*  Callback function that is fired after the ellipsis is added,
                    receives two parameters: isTruncated(boolean), orgContent(string). */
                callback    : function( isTruncated, orgContent ) {},

                lastCharacter   : {

                    /*  Remove these characters from the end of the truncated text. */
                    remove      : [ ' ', ',', ';', '.', '!', '?' ],

                    /*  Don't add an ellipsis if this array contains
                        the last character of the truncated text. */
                    noEllipsis  : []
                }
            });
        });
    </script>
    <script>
        $(function() {
            $but = $('#file_upload_game_screenshots');

            $("input:file[id=file_upload]").change(function() {
                document.getElementById('file_upload_game_screenshots').value = 'file(s) selected';
            });
        });
    </script>
    <script>
        $(function() {
            $but_med = $('#file_upload_game_screenshots_medium');

            $("input:file[id=file_upload_medium]").change(function() {
                document.getElementById('file_upload_game_screenshots_medium').value = 'file(s) selected';
            });
        });
    </script>
{/block}

{block name=additional_css}
    <link type="text/css" href="{$style_dir}css/vendor/lightbox-2.9.0.css" hreflang="en" rel="stylesheet">

    <!-- I am adding a small piece of style code to make the thumbs bigger when there a less screenshots available, it makes it look better -->
    <style>
        {if $nr_screenshots < 10}
            {literal}.games_main_detail_thumbs .p {width:160px;height:100px;}{/literal}
        {else}
            {literal}.games_main_detail_thumbs .p {width:90px;height:52px;}{/literal}
        {/if}
    </style>
{/block}

{block name=main_body}
    <div id="main" class="main_container_games_details">
        <div class="content_box_games_details" id="column_left_games_details">
            <br>
            <!--*********************-->
            <!--START Game info & Game Release tile -->
            <!--*********************-->
                <div class="games_main_details_info_position_high">
                    {include file='1/main/games_detail_info.html' position='high'}
                    {include file='1/main/games_detail_release_info.html'}
                </div>
            <!--*******************-->
            <!--END Game info tile -->
            <!--*******************-->
            <br>

            <!--*************************-->
            <!--START Game comments tile -->
            <!--*************************-->
                <div class="games_main_details_comments_position_high">
                    {include file='1/main/games_detail_comments.html'}
                </div>
            <!--***********************-->
            <!--END Game comments tile -->
            <!--***********************-->
            <br>
            {if isset($similar) or isset($interview) or isset($facts)}
                {if isset($boxscan)}
                    {if isset($comments)}
                    {else}
                        <!--****************************-->
                        <!--Start game submission tile  -->
                        <!--****************************-->
                        <div class="games_main_details_submissions_position_high">
                            {include file='1/main/games_detail_submission.html'}
                        </div>
                        <!--****************************-->
                        <!--END game submission tile    -->
                        <!--****************************-->
                    {/if}
                {/if}
            {/if}

            {if isset($boxscan)}
                <div class="games_main_details_submisions_position_medium">
                    {include file='1/main/games_detail_submission_medium.html'}
                </div>
            {else}
                {if isset($similar) or isset($interview) or isset($facts)}
                    <div class="games_main_details_submisions_position_medium">
                        {include file='1/main/games_detail_submission_medium.html'}
                    </div>
                {/if}
            {/if}

        </div>

        <div class="content_box_games_details" id="column_center_games_details">
            <!--*********************-->
            <!--START screenshot tile -->
            <!--*********************-->
            <br>
            <div class="games_main_details_screenshots_position_high">
                <div class="standard_tile">
                    <h1>
                        {$game_info.game_name|upper}
                        {if isset($smarty.session.permission) and $smarty.session.permission == 1}
                            <a href="../../admin/games/games_detail.php?game_id={$game_id}" title="Edit this game in CPANEL" class="standard_tile_link_reverse"><span class="fa fa-pencil"></span></a>
                        {/if}
                    </h1>
                    <div class="standard_tile_line"></div>
                    {if isset($screenshots)}
                        <div id="jssor_1" class="games_main_detail_screenshot">
                            <div data-u="slides" class="games_main_detail_slides">
                                {foreach from=$screenshots item=line name=screenshots}
                                <div>
                                    <img data-u="image" alt="Screenshot #{$smarty.foreach.screenshots.index}" src="{$line.screenshot_image}">
                                    <img data-u="thumb" alt="Thumbnail #{$smarty.foreach.screenshots.index}" src="{$line.screenshot_image}">
                                </div>
                                {/foreach}
                            </div>
                            <!-- Thumbnail Navigator -->
                            <div data-u="thumbnavigator" class="games_main_detail_thumbs" data-autocenter="2" data-scale-left="0.75">
                                <div data-u="slides">
                                    <div data-u="prototype" class="p">
                                        <div data-u="thumbnailtemplate" class="t"></div>
                                    </div>
                                </div>
                            </div>
                            {if $nr_screenshots <= 20}
                                <!-- Bullet Navigator -->
                                <div data-u="navigator" class="games_main_detail_nav" data-scale="0.5">
                                    <div data-u="prototype" class="i">
                                        <svg viewbox="0 0 16000 16000" style="position:absolute;top:0;left:0;width:100%;height:100%;">
                                            <rect class="b" x="2200" y="2200" width="11600" height="11600"></rect>
                                        </svg>
                                    </div>
                                </div>
                            {/if}
                            <!-- Arrow Navigator -->
                            <div data-u="arrowleft" class="games_main_detail_arrow" id="games_main_detail_arrow_left" data-autocenter="2" data-scale="0.75" data-scale-left="1">
                                <svg viewbox="0 0 16000 16000" style="position:absolute;top:0;left:0;width:100%;height:100%;">
                                    <polyline class="a" points="11040,1920 4960,8000 11040,14080 "></polyline>
                                </svg>
                            </div>
                            <div data-u="arrowright" class="games_main_detail_arrow" id="games_main_detail_arrow_right" data-autocenter="2" data-scale="0.75" data-scale-right="1">
                                <svg viewbox="0 0 16000 16000" style="position:absolute;top:0;left:0;width:100%;height:100%;">
                                    <polyline class="a" points="4960,1920 11040,8000 4960,14080 "></polyline>
                                </svg>
                            </div>
                        </div>
                    {else}
                        <div class="standard_tile_padding">
                            <h6 style="text-align:center;">
                                There are no screenshots in the database. You have any? Please use the submit tile to sent it to us. You can select more screenshots at once to upload.
                            </h6>
                        </div>
                    {/if}
                    {if isset($screenshots)}
                        <!-- #endregion Jssor Slider End -->
                        <span class="games_main_detail_info_right"><span class="standard_tile_subtext"><b>{$nr_screenshots}</b> screenshots loaded</span></span>
                        <span class="standard_tile_subtext" style="float:right;margin-right:20px;">Autoplay <a href="javascript:Play();" id="play_jssor1" >On</a>/<a id="pause_jssor1" href="javascript:Pause();">Off</a></span>
                        <br><br>
                    {/if}
                </div>
            </div>
            <!--*********************-->
            <!--END screenshot tile  -->
            <!--*********************-->

            <!--*********************-->
            <!--START Game info tile -->
            <!--*********************-->
                <div class="games_main_details_info_position_low">
                    <br>
                    {include file='1/main/games_detail_info.html' position='low'}
                    {include file='1/main/games_detail_release_info.html'}
                </div>
            <!--*******************-->
            <!--END Game info tile -->
            <!--*******************-->

            <!--*************************-->
            <!--START Review preview tile -->
            <!--**************************-->
            <br>
            <div class="games_main_details_reviews_position_high">
                <div class="standard_tile">
                    <h1><a href="../games/games_reviews_main.php" class="standard_tile_link" title="Click to see all reviews">REVIEWS</a></h1>
                    <div class="standard_tile_line"></div>
                    {if isset($user_session)}
                        <div class="standard_tile_padding">
                            <h6 style="text-align:center;">
                                Feel inspired to write your own review? Please click <a href="../games/games_reviews_add.php?game_id={$game_info.game_id}" class="standard_tile_link">here</a> and get started!
                            </h6>
                        </div>
                    {else}
                        <div class="games_main_detail_comments_log_on">
                            If you like to write a review yourself, please log in and follow the link.
                        </div>
                    {/if}
                    {if isset($review)}
                    <div class="standard_tile_line"></div>
                    <table class="primary_table_list no_border">
                    {foreach from=$review item=line name=review}
                        <tr>
                        <td>
                            <div class="standard_tile_padding">
                                <div style="display:inline-block;float:left;padding-right:15px;">
                                    <a href="../../includes/show_image.php?file={$line.screenshot}&amp;resize=410,null,null,null" data-lightbox="image-1">
                                    <img src="../../includes/show_image.php?file={$line.screenshot}&amp;resize=210,null,null,null" alt="Click to enlarge!" class="user_stats_img_dark" style="max-width:95%;"></a>
                                </div>
                                <h4 style="white-space: nowrap;overflow: hidden;text-overflow: ellipsis">
                                    Written by <a href="../../admin/user/user_detail.php?user_id_selected={$line.user_id}" class="standard_tile_link">{$line.user_name}</a>
                                </h4>
                                <h5 style="font-weight: bold;">{$line.date}</h5>
                                <div class="game_details_review_preview_text">
                                    {$line.text}
                                </div>
                                <h2><a href="../games/games_reviews_detail.php?game_id={$game_id}&review_id={$line.review_id}" class="standard_tile_link">Read more <i class="fa fa-chevron-right" aria-hidden="true"></i></a></h2>
                                <br>
                            </div>
                        </td>
                        </tr>
                    {/foreach}
                    </table>
                    {/if}
                </div>
            </div>
            <!--*************************-->
            <!--END Review preview tile  -->
            <!--**************************-->

            {if isset($similar) or isset($interview) or isset($facts)}
                {if isset($boxscan)}
                    {if isset($comments)}
                        <!--****************************-->
                        <!--Start game submission tile  -->
                        <!--****************************-->
                        <br>
                        <div class="games_main_details_submissions_position_high">
                            {include file='1/main/games_detail_submission.html'}
                        </div>
                        <!--****************************-->
                        <!--END game submission tile    -->
                        <!--****************************-->
                    {/if}
                {/if}
            {else}
                {if isset($boxscan)}
                    {if isset($review)}
                    {else}
                        <br>
                        <!--****************************-->
                        <!--Start game submission tile  -->
                        <!--****************************-->
                        <div class="games_main_details_submissions_position_high">
                            {include file='1/main/games_detail_submission.html'}
                        </div>
                        <!--****************************-->
                        <!--END game submission tile    -->
                        <!--****************************-->
                    {/if}
                {/if}
            {/if}

        </div>

        <div class="content_box_games_details" id="column_right_games_details">
            <!--*********************-->
            <!--START boxscan tile -->
            <!--*********************-->
            <br>
            <div class="games_main_details_boxscans_position_high">
                <div class="standard_tile">
                    <h1>BOXSCAN</h1>
                    <div class="standard_tile_line"></div>
                    {if isset($boxscan)}
                        <div id="jssor_2" class="games_main_detail_box">
                            <!-- Loading Screen -->
                            <div data-u="slides" class="games_main_detail_slides_box">
                                {foreach from=$boxscan item=line name=boxscan}
                                    <div>
                                        <a href="../../includes/show_image.php?file={$line.image_pop}" data-lightbox="image-1" class="latest_comments_link"><img data-u="image" alt="Box scan" src="{$line.image}" class="games_main_detail_box_img"></a>
                                        <div data-u="thumb">
                                            <div style="width: 100%; height: 100%; background-image: url({$line.image}); background-position: center center; background-repeat: no-repeat; background-size: contain;">
                                            </div>
                                        </div>
                                    </div>
                                {/foreach}
                            </div>
                            <!-- Thumbnail Navigator -->
                            <div data-u="thumbnavigator" class="games_main_detail_thumbs_box" data-autocenter="1" data-scale-bottom="0.75">
                                <div data-u="slides">
                                    <div data-u="prototype" class="p" style="width:100px;height:100px;">
                                        <div data-u="thumbnailtemplate" class="t"></div>
                                    </div>
                                </div>
                            </div>
                            <!-- Arrow Navigator -->
                            <div data-u="arrowleft" class="games_main_detail_arrow" id="games_main_detail_arrow_left_box" data-autocenter="2" data-scale="0.75" data-scale-left="1">
                                <svg viewbox="0 0 16000 16000" style="position:absolute;top:-75px;left:0;width:100%;height:100%;">
                                    <polyline class="a" points="11040,1920 4960,8000 11040,14080 "></polyline>
                                </svg>
                            </div>
                            <div data-u="arrowright" class="games_main_detail_arrow" id="games_main_detail_arrow_right_box" data-autocenter="2" data-scale="0.75" data-scale-right="1">
                                <svg viewbox="0 0 16000 16000" style="position:absolute;top:-75px;left:0;width:100%;height:100%;">
                                    <polyline class="a" points="4960,1920 11040,8000 4960,14080 "></polyline>
                                </svg>
                            </div>
                        </div>
                        <span class="games_main_detail_info_right"><span class="standard_tile_subtext">{if isset($nr_box)}{if $nr_box == '1'}<b>{$nr_box}</b> boxscan loaded{else}<b>{$nr_box}</b> boxscans loaded{/if}{/if}</span></span>
                        <span class="standard_tile_subtext" style="float:right;margin-right:20px;">Autoplay <a href="javascript:Play_box();" id="play_jssor2" >On</a>/<a href="javascript:Pause_box();" id="pause_jssor2">Off</a></span>
                        <br><br>
                    {else}
                        <div class="standard_tile_padding">
                            <h6 style="text-align:center;">
                                There is no boxscan in the database. You have one? Please use the submit tile to sent it to us.
                            </h6>
                        </div>
                    {/if}
                </div>
            </div>
            <!--*********************-->
            <!--END boxscan tile     -->
            <!--*********************-->

            <!--*********************-->
            <!--START interview tile -->
            <!--*********************-->
            <div class="games_main_details_interviews_position_high">
                {include file='1/main/games_detail_interview.html'}
            </div>
            <!--*********************-->
            <!--END interview tile   -->
            <!--*********************-->

            <!--*********************-->
            <!--START similar tile   -->
            <!--*********************-->
            <div class="games_main_details_similar_position_high">
                {include file='1/main/games_detail_similar.html'}
            </div>
            <!--*********************-->
            <!--END similar tile     -->
            <!--*********************-->

            <!--*********************-->
            <!--START Facts tile     -->
            <!--*********************-->
            <div class="games_main_details_facts_position_high">
                {include file='1/main/games_detail_facts.html'}
            </div>
            <!--*********************-->
            <!--END Facts tile          -->
            <!--*********************-->

            {if isset($similar) or isset($interview) or isset($facts)}
                {if isset($boxscan)}
                {else}
                    <!--****************************-->
                    <!--Start game submission tile  -->
                    <!--****************************-->
                    <div class="games_main_details_submissions_position_high">
                        <br>
                        {include file='1/main/games_detail_submission.html'}
                    </div>
                    <!--****************************-->
                    <!--END game submission tile    -->
                    <!--****************************-->
                {/if}
            {else}
                {if isset($boxscan)}
                    {if isset($review)}
                        <!--****************************-->
                        <!--Start game submission tile  -->
                        <!--****************************-->
                        <div class="games_main_details_submissions_position_high">
                            <br>
                            {include file='1/main/games_detail_submission.html'}
                        </div>
                        <!--****************************-->
                        <!--END game submission tile    -->
                        <!--****************************-->
                    {/if}
                {else}
                    <!--****************************-->
                    <!--Start game submission tile  -->
                    <!--****************************-->
                    <div class="games_main_details_submissions_position_high">
                        <br>
                        {include file='1/main/games_detail_submission.html'}
                    </div>
                    <!--****************************-->
                    <!--END game submission tile    -->
                    <!--****************************-->
                {/if}
            {/if}

            {if isset($boxscan)}
            {else}
                {if isset($similar) or isset($interview) or isset($facts)}
                {else}
                    <br>
                    <div class="games_main_details_submisions_position_medium">
                        {include file='1/main/games_detail_submission_medium.html'}
                    </div>
                {/if}
            {/if}
        </div>
    </div>
{/block}
