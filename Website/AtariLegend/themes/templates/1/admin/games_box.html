{*
/***************************************************************************
*                                games_box.html
*                            --------------------------
*   begin                : 2005-01-06
*   copyright            : (C) 2005 Atari Legend
*   email                : admin@atarilegend.com
*
*   Id:  games_box.html,v 0.10 2005/11/19 Silver
*   Id:  games_box.html,v 0.20 2016/07/20 Grave
*                           - AL 2.0
*   Id:  games_box.html,v 0.21 2016/08/19 Grave
*                           - added lightbox
*   Id:  games_box.html,v 0.22 2017/04/27 Grave
*                           - new type of selector for file upload
*
***************************************************************************/
*}
{extends file='1/admin/frontpage.html'}

{block name=java_script}
<script>
$(function() {
    $but = $('#file_upload_game_box');

    $("input:file[id=file_upload]").change(function() {
        document.getElementById('file_upload_game_box').value = $(this).val();
    });
});

function deletescreen(JSgameboxID,JSmode)
{
    // CONFIRM REQUIRES ONE ARGUMENT
    var message = "Are you sure you want to delete this scan?";
    // CONFIRM IS BOOLEAN. THAT MEANS THAT
    // IT RETURNS TRUE IF 'OK' IS CLICKED
    // OTHERWISE IT RETURN FALSE
    var return_value = confirm(message);
    if (return_value !="0")
    {
        url="../games/db_games_box.php?mode="+JSmode+"&game_boxscan_id="+JSgameboxID+"&game_id={$game_info.game_id}&action=boxscan_delete";
        location.href=url;
    }
}
</script>
<script src="{$template_dir}includes/js/vendor/lightbox-2.9.0.min.js"></script>
<link type="text/css" href="{$style_dir}css/vendor/lightbox-2.9.0.css" hreflang="en" rel="stylesheet">
{/block}

{block name=title}{$game_info.game_name} - Boxscans{/block}

{block name=main_tile}
<div class="standard_tile" id="games_boxscan">
    <h1>{$game_info.game_name}</h1>
    <div class="standard_tile_line"></div>
    <div class="standard_tile_text">
        <div class="left_nav_section">
            In this section you can add boxscans to the database. Front and back scans. First add a front box, then you'll have the opportunity to upload and link a back scan to it!
        </div>
        <br>
        <br>
        <fieldset class="centered_fieldset">
            <legend>Upload a boxscan</legend>
            <div class="boxscan_table_head">
                Browse for a <b>{$mode.mode}</b> boxscan and click "submit" to upload it.
            </div>
            <div class="boxscan_table_body">
                <form enctype="multipart/form-data" name="frmUploadShot" action="db_games_box.php" method="post">
                    <br>
                    <!--<input type="file" name="image[1]">-->
                    <label for="file_upload" class="file_upload">Select file</label>
                    <input id="file_upload" type="file" name="image[1]">
                    <input type="text" class="standard_tile_input_small" id="file_upload_game_box">&nbsp;
                    <input type="hidden" name="game_id" value="{$game_info.game_id}">
                    <br>
                    <br>
                    {if $mode.mode eq "back"}
                        <input type="hidden" name="mode" value="back">
                        <input type="hidden" name="frontscan_id" value="{$mode.frontscan_id}">
                    {/if}
                    <input type="hidden" name="action" value="boxscan_upload">
                    <input type="submit" value="Upload" class="topbutton_cpanel_small">
                </form>
                <br>
            </div>
        </fieldset>
        <br>
        <br>
        <fieldset class="centered_fieldset">
            <legend>Front boxscans</legend>
                {if $nr_front == 0}
                    No frontscan available
                {else}
                    {foreach from=$frontscan item=line}
                        <div style="display:inline-block;text-align:center;padding-left:20px">
                            <b>Box ID - {$line.game_boxscan_id}</b>
                            <br>
                            <br>
                            <a href="../../includes/show_image.php?file={$line.front_image}" data-lightbox="image-1" data-title="Front boxscans">
                                <img style="display:inline;" src="../../includes/show_image.php?file={$line.front_image}&amp;resize=75,null,null,null" width="75" alt="Click to enlarge!"  class="game_screenshot_img">
                            </a>
                            <br>
                            <a style="cursor:pointer;" class="left_nav_link" OnClick="deletescreen({$line.game_boxscan_id},'notback'); return false;">Delete</a> --
                            <a href="../games/games_box.php?game_id={$game_info.game_id}&amp;mode=back&amp;frontscan_id={$line.game_boxscan_id}" class="left_nav_link">Add Back</a>
                            <br>
                            <br>
                        </div>
                    {/foreach}
                {/if}
                <br>
        </fieldset>
        <br>
        <fieldset class="centered_fieldset">
            <legend>Back boxscans</legend>
                {if $nr_back == 0}
                    No backscan available
                {else}
                    {foreach from=$backscan item=line}
                        <div style="display:inline-block;text-align:center;padding-left:20px">
                            <b>Box ID - {$line.game_boxscan_id}</b>
                            <br>
                            <br>
                            <a href="../../includes/show_image.php?file={$line.back_image}" data-lightbox="image-1" data-title="Back boxscan">
                                <img style="display:inline;" src="../../includes/show_image.php?file={$line.back_image}&amp;resize=75,null,null,null" width="75" alt="Click to enlarge!"  class="game_screenshot_img">
                            </a>
                            <br>
                            <a style="cursor:pointer;" class="left_nav_link" OnClick="deletescreen({$line.game_boxscan_id},'back'); return false;">Delete</a>
                            <br>
                            <br>
                            {if $line.boxscan_cross_id neq ""}
                                <b>linked to image {$line.boxscan_cross_id}</b>
                            {/if}
                            <br>
                            <br>
                        </div>
                    {/foreach}
                {/if}
        </fieldset>
        <br>
        <div class="standard_table_center"><a href="javascript:history.go(-1)" class="standard_tile_link">back</a></div>
    </div>
</div>
{/block}
