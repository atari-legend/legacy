{*
/***************************************************************************
*                           did_you_know.html
*                           --------------------------
*   begin                : Sept 29, 2005
*   copyright            : (C) 2005 Atari Legend
*   email                : admin@atarilegend.com
*
*   Id: did_you_know.html,v 0.10 2015/09/04 ST Graveyard
*   Id: did_you_know.html,v 0.20 2015/11/12 ST Graveyard - HTML validated
*
***************************************************************************/

*}
{extends file='1/admin/frontpage.html'}
{block name=java_script}
<script>
function OSDMessageDisplay(message) {
    $.notify_osd.create({
        'text': message, // notification message
        'icon': '../../../themes/styles/1/images/osd_icons/star.png', // icon path, 48x48
        'sticky': false, // if true, timeout is ignored
        'timeout': 4, // disappears after 6 seconds
        'dismissable': true // can be dismissed manually
    });
}

    function DidyouknowdeleteConfirmation(trivia_id) {
        $("#JSGenericModal").dialog({
            title: "Delete Quote",
            open: $("#JSGenericModalText").text("Are you sure you want to delete this Quote?"),
            resizable: false,
            height: 200,
            modal: true,
            buttons: {
                "Delete Quote": function() {
                    $(this).dialog("close");
                    DidyouknowDelete(trivia_id);
                },
                Cancel: function() {
                    $(this).dialog("close");
                }
            }
        });
    }
    function DidyouknowDelete(trivia_id) {
        $.ajax({
            // The URL for the request
            url: "db_trivia.php",
            data: "action=did_you_know_delete&trivia_id=" + trivia_id,
            type: "POST",
            dataType: "html",
            // Code to run if the request succeeds;
            success: function(html) {
                var ReturnHtml = html.split('[BRK]');
                $("#JStrivia_id_" +trivia_id).html("");
                OSDMessageDisplay(html);
            }
        });
    }
    function DidyouknowEdit(trivia_id) {
        $.ajax({
            // The URL for the request
            url: "ajax_trivia_quotes.php",
            data: "action=did_you_know_edit_view&trivia_id=" + trivia_id,
            type: "GET",
            dataType: "html",
            // Code to run if the request succeeds;
            success: function(html) {
                var ReturnHtml = html.split('[BRK]');
                $("#JSDidYouKnow_" + trivia_id).html(ReturnHtml[0]);
                $("#JSDidYouKnowEdit_" + trivia_id).html(ReturnHtml[1]);
            }
        });
    }
function DidyouknowUpdate(trivia_id) {

    var form = $("#JSTrivia"+trivia_id).serialize() + "&action=update_trivia";
    $.ajax({
        // The URL for the request
        url: "db_trivia.php",
        data: form,
        type: "POST",
        dataType: "html",
        // Code to run if the request succeeds;
        success: function(html) {
            var ReturnHtml = html.split('[BRK]');
            $("#JSDidYouKnow_" + trivia_id).html(ReturnHtml[0]);
            $("#JSDidYouKnowEdit_" + trivia_id).html(ReturnHtml[1]);
            OSDMessageDisplay("Trivia updated!");
        }
    });
}

</script>
{/block}
{block name=main_tile}
<div id="JSGenericModal" title="Delete Title?" style="display:none;">
    <p>
        <span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>
        <div id="JSGenericModalText">Are you sure?</div>
    </p>
</div>
<div class="standard_tile">
    <h1>DID YOU KNOW</h1>
    <div class="standard_tile_line"></div>
    <div class="standard_tile_padding">
        <div class="left_nav_section">
            Here you can add a new trivia by using the below text field or you can delete one of the old trivias.
        </div>
        <br>
        <br>
        <fieldset class="primary_fieldset">
        <legend class="primary_legend">Add new Trivia</legend>
        <div class="centered_fieldset">
            <form action="../trivia/db_trivia.php" method="post" name="trivia" id="trivia">
                Trivia Text<br>
                <textarea name="trivia_text" id="trivia_text" class="standard_tile_input_area"></textarea>
                <br><br>
                <input type="hidden" name="action" value="did_you_know_insert">
                <input type="submit" value="Submit" class="topbutton_cpanel_small">
            </form>
        </div>
        </fieldset>
        <br>
        {foreach from=$trivia item=line}
            <fieldset class="primary_fieldset" id="JStrivia_id_{$line.trivia_id}">
                <legend class="primary_legend">Trivia ID {$line.trivia_id}</legend>
                <form action="" method="post" name="trivia{$line.trivia_id}" id="JSTrivia{$line.trivia_id}">
                    <br>
                    <div id="JSDidYouKnow_{$line.trivia_id}">
                        {$line.trivia_text}
                    </div>
                    <br>
                    <br>
                    <input type="hidden" name="trivia_id" value="{$line.trivia_id}">
                    <input type="button" value="Delete"  class="topbutton_cpanel_small" onclick="DidyouknowdeleteConfirmation({$line.trivia_id})">
                    <div id="JSDidYouKnowEdit_{$line.trivia_id}" style="display:inline-block;">
                    <input type="button" value="Edit"  class="topbutton_cpanel_small" onclick="DidyouknowEdit({$line.trivia_id})">
                    </div>
                </form>
            </fieldset>
            <br>
        {/foreach}
    </div>
</div>
{/block}
