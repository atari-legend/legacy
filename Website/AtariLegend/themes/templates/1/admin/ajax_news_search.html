{*
/***************************************************************************
*                                ajax_news_search.html
*                            ----------------------------
*   begin                : Tuesday, April 10, 2018
*   copyright            : (C) 2018 Atari Legend
*   email                : admin@atarilegend.com
*   actual update        : File creation
*
***************************************************************************/
****************************************************************************
This is the sub template file to generate the news edit page
****************************************************************************
*}

{block name=java_script}
<script src="{$template_dir}includes/js/bbcode.js"></script><!-- Load the BBCODE script -->
<script src="{$template_dir}includes/js/news.js"></script><!-- Load all the news scripts -->
<script src="{$template_dir}includes/js/ui.widgets.js"></script><!-- The autocomplete and dropdown switcher -->
{/block}

{block name=title}Edit News{/block}

{block name=main_tile}
<div class="standard_tile" id="news_approve">
    <div class="help-tip">
        <p>
            <i class="fa fa-envelope" aria-hidden="true"></i> - Email <br>
            <i class="fa fa-pencil fa-lg" aria-hidden="true"></i> - Edit <br>
            <i class="fa fa-trash fa-lg" aria-hidden="true"></i> - Delete <br>
            <i class="fa fa-floppy-o" aria-hidden="true"></i> - Save
        </p>
    </div>
    <h1>EDIT NEWS</h1>
    <div class="standard_tile_line"></div>
    <div class="standard_tile_padding">
        <div class="left_nav_section">
            This is the news editing page. News posts can be changed or deleted here. As these are all approved news entries, keep in mind these changes are instantly visible on the main site! Use the left side to perform a search query on the news table.
        </div>
        <br>
        <br>
        <form name="post" id="post">
        <div class="jsNewsWrapper infinite-container">
            <div id="news_edit_list">
                {if $nr_news <> ''}
                    {if $nr_news <> ''}<div class="standard_tile_text_center">Your search query resulted in {$nr_news} entries.</div><br>{/if}
                    {foreach from=$news item=line}
                        <div id="jsNewsId{$line->getId()}" class="infinite-item">
                            <div class="news_post_box" id="{$line->getTimestamp()}">
                                <div class="news_userinfo">
                                    {if (null !== $line->getAvatarImage()) and $line->getAvatarImage() != ''}
                                        <img src="../../includes/show_image.php?file={$line->getAvatarImage()}&amp;resize=100,null,null,null" alt="{$line->getUserName()}" width="100px">
                                    {else}
                                    {/if}
                                    <a href="../user/user_detail.php?user_id_selected={$line->getUserId()}" class="standard_tile_link">{$line->getUserName()}</a>
                                    <br><br><br>
                                    <span class="text-nowrap">
                                        Joined: {$line->getJoinDate()}
                                        <br>
                                        {if $line->getUserNewsCount() > 0}
                                            News posts:  <a href="#" data-user-id="{$line->getUserId()}" class="standard_tile_link jsUserNewsLink">{$line->getUserNewsCount()}</a>
                                        {else}
                                            News posts:  {$line->getUserNewsCount()}
                                        {/if}
                                        <br>
                                        {if $line->getKarma() == '' OR $line->getKarma() == 0}
                                            Karma : 0
                                        {else}
                                            Karma: <a href="../user/user_statistics.php?user_id_selected={$line->getUserId()}" class="standard_tile_link">{$line->getKarma()}</a>
                                        {/if}
                                    </span>
                                </div>
                                <div class="news_post_detail" id="jsNewsEditBox{$line->getId()}">
                                    <div class="news_userinfo_phoneview">
                                        {if (null !== $line->getAvatarImage()) and $line->getAvatarImage() !== ''}
                                            <img src="../../includes/show_image.php?file={$line->getAvatarImage()}&amp;resize=100,null,null,null" alt="{$line->getUserName()}" width="100px">
                                        {else}
                                            <img src="../../includes/show_image.php?file={$style_dir} {$line->getAvatarImage()}&amp;resize=100,null,null,null" alt="{$line->getUserName()}" width="100px">
                                        {/if}
                                        <h6>
                                            <a href="../user/user_detail.php?user_id_selected={$line->getUserId()}">{$line->getUserName()}</a>
                                        </h6>
                                    </div>
                                    <h4 class="news_title">
                                        {$line->getHeadline()}</a>
                                    </h4>
                                    <ul class="news_buttons">
                                        {if $line->getEmail() !== ''}
                                        <li class="primary_button jsNewsEmailButton">
                                            <a href="mailto:{$line->getEmail()}?subject=Your news post : {$line->getHeadline()|escape:'url'} at Atari Legend" class="links_addnew_link">
                                                <i class="fa fa-envelope" aria-hidden="true"></i>
                                            </a>
                                        </li>
                                        {/if}
                                        <li class="primary_button jsNewsPostEditButton" data-news-id="{$line->getId()}">
                                            <a class="links_addnew_link">
                                                <i class="fa fa-pencil" aria-hidden="true"></i>
                                            </a>
                                        </li>
                                        <li class="primary_button jsNewsPostDeleteButton" data-news-id="{$line->getId()}">
                                            <a class="links_addnew_link">
                                                <i class="fa fa-trash" aria-hidden="true"></i>
                                            </a>
                                        </li>
                                        <div class="news_button_dropdown" data-dropdown-id="{$line->getId()}">
                                            <li class="primary_button">
                                                <a class="links_addnew_link">
                                                    <i class="fa fa-bars" aria-hidden="true"></i>
                                                </a>
                                            </li>
                                            <div class="dropdown_box" id="dropdown_box{$line->getId()}">
                                                <li class="dropdown_item">
                                                    <a href="mailto:{$line->getEmail()}?subject=Your news post : {$line->getHeadline()|escape:'url'} at Atari Legend" class="links_addnew_link">
                                                        Email
                                                    </a>
                                                </li>
                                                <li class="dropdown_item jsNewsPostEditDropdownItem" data-news-id="{$line->getId()}">
                                                    Edit
                                                </li>
                                                <li class="dropdown_item jsNewsPostDeleteDropdownItem" data-news-id="{$line->getId()}">
                                                    Delete
                                                </li>
                                            </div>
                                        </div>
                                    </ul>
                                    <div class="news_line" id="line_above_info"></div>
                                    <h4 class="news_title_phoneview">
                                        {$line->getHeadline()}</a>
                                    </h4>
                                    <div class="news_post_info">
                                        Posted <span>by <a href="../user/user_detail.php?user_id_selected={$line->getUserId()}">{$line->getUserName()}</a></span> on {$line->getDate()}
                                    </div>
                                    <div class="news_line" id="line_below_info"></div>
                                    <div class="news_post_text" id="jsNewsTextBox{$line->getId()}">
                                        {if $line->getImageId() != ''}
                                            <div style="float:left;margin:15px;">
                                                <img src="../../includes/show_image.php?file={$line->getImage()}&amp;resize=120,null,null,null" alt="newsbutton" class="game_screenshot_img">
                                            </div>
                                        {/if}
                                        <br>
                                        {$line->getText()}
                                        <br>
                                        <br>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {/foreach}
                {else}
                    <div class="standard_tile_text_center">No news entries for your query.</div>
                {/if}
            </div>
        </div>
        <div id="JSnewsText" style="display:none;">{if isset($news_search)}{$news_search}{/if}</div>
        <div id="JSuserId" style="display:none;">{if isset($user_id)}{$user_id}{/if}</div>
    </div>
</div>

{/block}
