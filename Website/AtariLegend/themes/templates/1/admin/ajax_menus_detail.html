{*
/***************************************************************************
*                             ajax_menu_detail.html
*                            --------------------------
*   begin                : 
*   copyright            : (C) 2016 Atari Legend
*   email                : admin@atarilegend.com
*
*   Id: ajax_menu_detail.html,v 0.10 2016/09/01 00:17 STG
*			- AL 2.0
*
***************************************************************************/
*}

{* EDIT BOX FOR MENU DISKS *}
{if isset($smarty_action) and $smarty_action == "edit_disk_box"}	
	<td colspan="4" style="width:100%;margin:0px;padding:0px;">
		<table class="standard_table_list" id="menu_list_table">
			<tr>
				<td class="menu_disk_list_td"><a onclick="CloseeditDisk({$menus.menu_disk_id})" style="cursor: pointer;">{$menus.menu_disk_name}</a></td>
				<td class="menu_list_crew_td">{if isset($menus.crew_id)}{$menus.crew_name}{else}<i>n/a</i>{/if}</td>
				<td class="menu_list_ind_td">{if isset($menus.ind_id)}{$menus.ind_name}{else}<i>n/a</i>{/if}</td>						
				<td class="menu_state_td">{if isset($menus.menu_state)}{$menus.menu_state}{else}<i>n/a</i>{/if}</td>
			</tr>
			<tr>
				<td colspan="4" style="border-top: solid 1px #b2b2b2;width:100%;">
					<br>
					<div class="main_company_container">
						<div class="main_company_child" id="child_edit_company">
							<b>Set state:</b><br>
							<select name="state_id" id="quick_search_pub_select" onchange="ChangeState(this.value,{$menus.menu_disk_id})">
								<option value="">Set State</option>
								{if isset($state_id)}
									{html_options values=$state_id output=$menu_state selected=$menu_state_id}
								{/if}
							</select>
							<br>
							<br>
							<br>
							<b>Menu disk options :</b><br><br>
							<div id="intro_credit_link"><a onclick="popAddIntroCred({$menus.menu_disk_id})" style="cursor: pointer;" class="standard_tile_link">Add intro credits</a><br></div>
							<div id="gameto_menu_link"><a onclick="popAddGames({$menus.menu_disk_id})" style="cursor: pointer;" class="standard_tile_link">Add Game/Tool/Demo to menu</a><br></div>
							<a onclick="CloseeditDisk({$menus.menu_disk_id})" style="cursor: pointer;" class="standard_tile_link">Add Game Doc to menu</a><br>
							<a onclick="CloseeditDisk({$menus.menu_disk_id})" style="cursor: pointer;" class="standard_tile_link">Add Tool Doc to menu</a><br>
						</div>
						<div class="main_company_child" id="child_add_company">
							<b>Release Year:</b><br>
							{html_select_date start_year="1984" end_year="+1" display_days=false display_months=false prefix="" field_name="" style="width:100px;height:25px;" name="year_id" selected=$menus.menu_year onchange="ChangeYear(this.value,$menu_disk_id)"}
							{if isset($menus.menu_year)}
							<div class="standard_table_center">Saved year - <b>{$menus.menu_year}</b></div>
							{else}
								<div class="standard_table_center">No release year linked</div>
							{/if}
							<br>
							<br>
							<div id="menu_detail_expand"></div>
						</div>
					</div>
					<br>
					<br>	
					<div id="menu_credit_list">	
						{if isset($individuals)}
							<table class="table_game_list" id="game_list_table" style="width:95%;border: solid 1px black;margin:auto;">
							<tr>
								<th id="menu_cred_th">Credits</th>
								<th id="menu_scene_th">"Sceners"</th>
								<th id="menu_nick_th">Nick</th>
								<th id="menu_update_th"></th>
								<th id="menu_delete_th"></th>
							</tr>	
							{foreach name=outer item=individual from=$individuals}	
								<tr>
									<td class="menu_cred_td">{$individual.author_type_info}</td>
									<td class="menu_scene_td">{$individual.ind_name}</td>
									<form action="#" method="post" name="nick_edit{$individual.ind_id}" id="nick_edit{$individual.ind_id}">
										<td class="menu_nick_td">
											<select name="individual_nicks_id" id="quick_search_small_select" size="1">
												<option value="-" SELECTED>None</option>
											</select>
										</td>
										<td class="menu_update_td">
											<input type="hidden" name="action" value="update_nick">
											<input type="submit" name="inserter" value="Update" class="quick_search_games_button">
										</td>
									</form>				
									<td class="menu_delete_td" style="text-align:right;">
										<input type="button" onclick="DeleteCredits({$individual.menu_disk_credits_id},{$individual.menu_disk_id})" class="quick_search_games_button" value="delete" style="margin-right:5px;">
									</td>
								</tr>
							{/foreach}
							</table>
						{/if}
					</div>			
					<br>
					<br>
					<div id="menu_software_list">
						{if isset($game)}
							<table class="table_game_list" style="width:95%;border: solid 1px black;margin:auto;">
							<tr>
								<th id="menu_mark_th"></th>
								<th id="menu_gamename_th">Game Name</th>
								<th id="menu_gamedev_th">Developer</th>
								<th id="menu_gameyear_th">Year</th>
								<th id="menu_gameinfo_th">Info</th>
							</tr>
							{foreach from=$game item=line}
								<tr class="table_game_list">
									<td class="menu_mark_td">
										<form name="MenuDiskContent" id="MenuDiskContent">
										<input type="checkbox" id="menu_disk_title_id{$line.menu_disk_title_id}" name="menu_disk_title_id[]" value="{$line.menu_disk_title_id}" onchange="deleteGamefromMenu({$line.menu_disk_title_id},{$menu_disk_id})">
									</td>
									<td class="menu_gamename_td">
										{if $line.game_name != ''}
											{if $line.menu_types_text == 'Game'}<a href="../games/games_detail.php?game_id={$line.game_id}" class="standard_table_left">{$line.game_name}</a>{else}<a href="../administration/construction.php" class="standard_table_left">{$line.game_name}</a>{/if}
										{else}
											<i>n/a</i>
										{/if}
									</td>
									<td class="menu_gamedev_td">
										{if $line.developer_name != ''}
											{$line.developer_name}
										{else}
											<i>unknown</i>	
										{/if}
									</td>				
									<td class="menu_gameyear_td">
										{if $line.year != ''}
											<a href="../games/games_list.php?year={$line.year}&amp;action=search" class="standard_table_left">
												{$line.year}
											</a>
										{else}
											<i>n/a</i>
										{/if}
									</td>
									<td class="menu_gameinfo_td">
										{$line.menu_types_text}
									</td>
								</tr>
							{/foreach}
							<tr class="table_game_list">
								<td class="game_list_footer" colspan="5">
									<img src="../../../themes/templates/1/includes/img/arrow_ltr.gif" alt="" width="38" height="22">		
									<input type="hidden" name="action" value="delete_from_menu_disk">
									<input type="button" value="Delete" class="quick_search_games_button" style="display:inline;">
									</form>
								</td>
							</tr>
							</table>
						{/if}			
					</div>	
					<br>
					<br>
					<div id="menu_detail_expand_games"> </div>
				</td>
			</tr>
		</table>
	</td>
{/if}

{* CLOSE EDIT BOX FOR MENU DISKS *}
{if isset($smarty_action) and $smarty_action == "close_edit_disk_box"}
	<td class="menu_disk_list_td"><a onclick="editDisk({$menus.menu_disk_id})" style="cursor: pointer;">{$menus.menu_disk_name}</a></td>
	<td class="menu_list_crew_td">{if isset($menus.crew_id)}{$menus.crew_name}{else}<i>n/a</i>{/if}</td>
	<td class="menu_list_ind_td">{if isset($menus.ind_id)}{$menus.ind_name}{else}<i>n/a</i>{/if}</td>				
	<td class="menu_state_td">{if isset($menus.menu_state)}{$menus.menu_state}{else}<i>n/a</i>{/if}</td>
{/if}

{* POP FOR ADD INTRO CRED *}
{if isset($smarty_action) and $smarty_action == "add_intro_credit"}
	{* Start Individual add box *}
	<form action="" method="post" id="menu_credits_form">
		<b>Add intro credits:</b><br>
		<Select class="saveHistory" id="m1" name="m1" onchange="browseInd(this.value)" style="width:50px;height:25px;">
			{html_options values=$az_value output=$az_output}
		</select>
		<div id="ind_member">   
			<select id="ind_id" name="ind_id">
				{foreach from=$ind item=line}
					<option value="{$line.ind_id}">{$line.ind_name}</option>
				{/foreach}	
			</select>
		</div>	
		<input type="text" onkeyup="searchInd(this.value)" class="standard_tile_input_small" value="search">
		<select id="author_type_id" name="author_type_id" size="1" style="margin:5px;margin-top:0px;width:200px;">
		<option value="">-</option>	
			{foreach from=$author_type item=line}
				<option value="{$line.author_type_id}">{$line.author_type_info}</option>
			{/foreach}	
		</select>
		<br>
		<input type="hidden" name="action" value="add_intro_credits">
		<input type="hidden" name="menu_disk_id" value="{$menu_disk_id}">
		<input type="button" value="Add" onclick="addCreditstoMenu({$menu_disk_id})" class="topbutton_cpanel_small">
	</form>
	{* END Individual add box *}
{/if}


{if isset($smarty_action) and $smarty_action == "add_game_to_menu_return"}
	{if isset($game)}
		<table class="table_game_list" style="width:95%;border: solid 1px black;margin:auto;">
		<tr>
			<th id="menu_mark_th"></th>
			<th id="menu_gamename_th">Game Name</th>
			<th id="menu_gamedev_th">Developer</th>
			<th id="menu_gameyear_th">Year</th>
			<th id="menu_gameinfo_th">Info</th>
		</tr>
		{foreach from=$game item=line}
			<tr class="table_game_list">
				<td class="menu_mark_td">
					<form name="MenuDiskContent" id="MenuDiskContent">
					<input type="checkbox" id="menu_disk_title_id{$line.menu_disk_title_id}" name="menu_disk_title_id[]" value="{$line.menu_disk_title_id}" onchange="deleteGamefromMenu({$line.menu_disk_title_id},{$menu_disk_id})">
				</td>
				<td class="menu_gamename_td">
					{if $line.game_name != ''}<a href="games_detail.php?menu_disk_title_id={$line.menu_disk_title_id}" class="standard_table_left">{$line.game_name}</a>
						{else}<i>n/a</i>{/if}
				</td>
				<td class="menu_gamedev_td">{if $line.developer_name != ''}
							{$line.developer_name}
						{else}
							
						{/if}</td>				
				<td class="menu_gameyear_td">
					{if $line.year != ''}
						<a href="../games/games_list.php?year={$line.year}&amp;action=search" class="standard_table_left">
							{$line.year}
						</a>
						{else}
							<i>n/a</i>
						{/if}
				</td>
				<td class="menu_gameinfo_td">
					{$line.menu_types_text}
				</td>
			</tr>
		{/foreach}
		<tr>
			<td class="game_list_footer" colspan="5">
				<img src="../../../themes/templates/1/includes/img/arrow_ltr.gif" alt="" width="38" height="22">	
				<input type="hidden" name="action" value="delete_from_menu_disk">
				<input type="button" value="Delete" class="quick_search_games_button" style="display:inline;">
				</form>
			</td>
		</tr>
		</table>
	{/if}

	{if isset($osd_message)}
		[BRK]{$osd_message}
	{/if}
			
{/if}

{* This is the Ind browse *}
{if isset($smarty_action) and $smarty_action == "ind_gen_browse"}
	<select id="ind_id" name="ind_id">
		{foreach from=$author_type item=line}
			<option value="{$line.ind_id}">{$line.ind_name}</option>
		{/foreach}
	</select>
{/if}

				
{if isset($smarty_action) and $smarty_action == "update_menu_disk_credits"}
	<table class="table_game_list" style="width:95%;border: solid 1px black;margin:auto;">
		<tr>
			<th id="menu_cred_th">Credits</th>
			<th id="menu_scene_th">"Sceners"</th>
			<th id="menu_nick_th">Nick</th>
			<th id="menu_update_th"></th>
			<th id="menu_delete_th"></th>
		</tr>
		{if isset($individuals)}
			{foreach name=outer item=individual from=$individuals}	
				<tr>
					<td class="menu_cred_td">{$individual.author_type_info}</td>
					<td class="menu_scene_td">{$individual.ind_name}</td>
					<form action="#" method="post" name="nick_edit{$individual.ind_id}" id="nick_edit{$individual.ind_id}">
						<td class="menu_nick_td">
							<select name="individual_nicks_id" id="quick_search_small_select" size="1">
								<option value="-" SELECTED>None</option>
							</select>
						</td>
						<td class="menu_update_td">
							<input type="hidden" name="action" value="update_nick">
							<input type="submit" name="inserter" value="Update" class="quick_search_games_button">
						</td>
					</form>		
					<td class="menu_delete_td">
						<input type="button" onclick="DeleteCredits({$individual.menu_disk_credits_id},{$individual.menu_disk_id})" class="quick_search_games_button" value="delete">
					</td>
				</tr>
			{/foreach}
		{/if}
	</table>
{/if}
