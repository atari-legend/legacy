{* 
/***************************************************************************
                              menu_disk_list.tpl
*                            --------------------------
*   begin                : Sunday, August 28, 2005
*   copyright            : (C) 2005 Atari Legend
*   email                : admin@atarilegend.com
*
* 	id : menus_list.html ,v 0.10 2016/08/29 ST Graveyard 22:41
*			- AL 2.0
*
***************************************************************************/

************************************************************************************************
The main game page
************************************************************************************************
*}
{extends file='1/admin/frontpage.html'}
{block name=java_script}
<script type="text/javascript">
function browseCrew(str) {
    if (str == "") {
        document.getElementById("option_crew").innerHTML = "";
        return;
    } else { 
        if (window.XMLHttpRequest) {
            // code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        } else {
            // code for IE6, IE5
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange = function() {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) 
            {
                document.getElementById("option_crew").innerHTML = xmlhttp.responseText;
            } 
        }
        xmlhttp.open("GET","../menus/ajax_menus.php?action=crew_browse&query="+str,true);
        xmlhttp.send();
    }
}

function addNewdisk(str) {
    if (str == "") {
        document.getElementById("new_disk").innerHTML = "";
        return;
    } else { 
        if (window.XMLHttpRequest) {
            // code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        } else {
            // code for IE6, IE5
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange = function() {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) 
            {
                document.getElementById("new_disk").innerHTML = xmlhttp.responseText;
            } 
        }
        xmlhttp.open("GET","../menus/ajax_menus.php?menu_sets_id={$menu_set.menu_sets_id}&action=add_new_disk_box&query="+str,true);
        xmlhttp.send();
    }
} 

function CloseaddNewdisk() {
        document.getElementById("new_disk").innerHTML = "";
        return;
} 

function editDisk(str) {
	
	var str2 = "diskedit_ajax_";
	var disk_edit_ajax = str2.concat(str);
	
    if (str == "") {
        document.getElementById(disk_edit_ajax).innerHTML = "";
        return;
    } else { 
        if (window.XMLHttpRequest) {
            // code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        } else {
            // code for IE6, IE5
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange = function() {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) 
            {
                document.getElementById(disk_edit_ajax).innerHTML = xmlhttp.responseText;
            } 
        }
        xmlhttp.open("GET","../menus/ajax_menus_detail.php?action=edit_disk_box&menu_disk_id="+str,true);
        xmlhttp.send();
    }
} 

function CloseeditDisk(str) {
	
	var str2 = "diskedit_ajax_";
	var disk_edit_ajax = str2.concat(str);
	
    if (str == "") {
        document.getElementById(disk_edit_ajax).innerHTML = "";
        return;
    } else { 
        if (window.XMLHttpRequest) {
            // code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        } else {
            // code for IE6, IE5
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange = function() {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) 
            {
                document.getElementById(disk_edit_ajax).innerHTML = xmlhttp.responseText;
            } 
        }
        xmlhttp.open("GET","../menus/ajax_menus_detail.php?action=close_edit_disk_box&menu_disk_id="+str,true);
        xmlhttp.send();
    }
} 
function browseInd(str) {
    if (str == "") {
        document.getElementById("ind_member").innerHTML = "";
        return;
    } else { 
        if (window.XMLHttpRequest) {
            // code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        } else {
            // code for IE6, IE5
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange = function() {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                document.getElementById("ind_member").innerHTML = xmlhttp.responseText;
            }
        }
        xmlhttp.open("GET","../menus/ajax_menus_detail.php?action=ind_gen_browse&query="+str,true);
        xmlhttp.send();
    }
}

function searchInd(str) {
    if (str == "") {
        str = "empty";
			xmlhttp.onreadystatechange = function() {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                document.getElementById("ind_member").innerHTML = xmlhttp.responseText;
            }
        }   

    } else { 
        if (window.XMLHttpRequest) {
            // code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        } else {
            // code for IE6, IE5
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange = function() {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                document.getElementById("ind_member").innerHTML = xmlhttp.responseText;
            }
        }
        xmlhttp.open("GET","../menus/ajax_menus_detail.php?action=ind_gen_search&query="+str,true);
        xmlhttp.send();
    }
}
function CrewDelete(crew_select) 
{ 
            // CONFIRM REQUIRES ONE ARGUMENT 
         var message = "Are you sure you want to delete this crew from this menu series?"; 
         // CONFIRM IS BOOLEAN. THAT MEANS THAT 
         // IT RETURNS TRUE IF 'OK' IS CLICKED 
         // OTHERWISE IT RETURN FALSE 
         var return_value = confirm(message); 
 
         if (return_value !="0") 
         { 
              url="db_menu_disk.php?menu_sets_id={$menu_set.menu_sets_id}&crew_id="+crew_select+"&action=delete_crew_from_menu_set"; 
              location.href=url; 
         }  
} 
function popAddIntroCred(str) {
    if (str == "") {
        document.getElementById("menu_detail_expand").innerHTML = "";
        return;
    } else { 
        if (window.XMLHttpRequest) {
            // code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        } else {
            // code for IE6, IE5
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange = function() {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                document.getElementById("menu_detail_expand").innerHTML = xmlhttp.responseText;
                document.getElementById("intro_credit_link").innerHTML = "<a onclick=\"closeAddIntroCred("+str+")\" style=\"cursor: pointer;\" class=\"MAINNAV\">Add intro credits</a>";
            }
        }
        xmlhttp.open("GET","../menus/ajax_menus_detail.php?action=add_intro_credit&query="+str,true);
        xmlhttp.send();
    }
}

function closeAddIntroCred(str) {
        document.getElementById("menu_detail_expand").innerHTML = "";
        document.getElementById("intro_credit_link").innerHTML = "<a onclick=\"popAddIntroCred("+str+")\" style=\"cursor: pointer;\" class=\"MAINNAV\">Add intro credits</a>";
        return;
} 

function popAddGames(str) {
    if (str == "") {
        document.getElementById("menu_detail_expand").innerHTML = "";
        return;
    } else { 
        if (window.XMLHttpRequest) {
            // code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        } else {
            // code for IE6, IE5
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange = function() {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                document.getElementById("menu_detail_expand").innerHTML = xmlhttp.responseText;
                document.getElementById("gameto_menu_link").innerHTML = "<a onclick=\"closeAddGames("+str+")\" style=\"cursor: pointer;\" class=\"MAINNAV\">Add Game/Tool/Demo to menu</a>";
            }
        }
        xmlhttp.open("GET","../menus/ajax_addgames_menus.php?action=game_browse&list=full&query=num&menu_disk_id="+str,true);
        xmlhttp.send();
    }
}

function closeAddGames(str) {
        document.getElementById("menu_detail_expand").innerHTML = "";
        document.getElementById("gameto_menu_link").innerHTML = "<a onclick=\"popAddGames("+str+")\" style=\"cursor: pointer;\" class=\"MAINNAV\">Add Game/Tool/Demo to menu</a>";
        return;
} 

function browseGame(str,menu_disk_id) {
    if (str == "") {
        document.getElementById("game_list").innerHTML = "";
        return;
    } else { 
        if (window.XMLHttpRequest) {
            // code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        } else {
            // code for IE6, IE5
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange = function() {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                document.getElementById("game_list").innerHTML = xmlhttp.responseText;
            }
        }
        xmlhttp.open("GET","../menus/ajax_addgames_menus.php?action=game_browse&list=inner&query="+str+"&menu_disk_id="+menu_disk_id,true);
        xmlhttp.send();
    }
}

function searchGame(str,menu_disk_id) {
    if (str == "") {
        str = "empty";
			xmlhttp.onreadystatechange = function() {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                document.getElementById("game_list").innerHTML = xmlhttp.responseText;
            }
        }   

    } else { 
        if (window.XMLHttpRequest) {
            // code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        } else {
            // code for IE6, IE5
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange = function() {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                document.getElementById("game_list").innerHTML = xmlhttp.responseText;
            }
        }
        if (str.length >= 3) {
        xmlhttp.open("GET","../menus/ajax_addgames_menus.php?action=game_search&list=inner&query="+str+"&menu_disk_id="+menu_disk_id,true);
        xmlhttp.send();
	}
    }
}

function addGametoMenu(software_id,menu_disk_id,software_type) {
 if (software_id == "") {
        document.getElementById("menu_software_list").innerHTML = "";
        return;
    } else { 
        if (window.XMLHttpRequest) {
            // code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        } else {
            // code for IE6, IE5
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange = function() {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
				
				
				data = xmlhttp.responseText.split ( "[BRK]" );
				document.getElementById("menu_software_list").innerHTML = data[0];
 
            $.notify_osd.create({
				'text'        : data[1],             // notification message
				'icon'        : '../templates/0/icons/star.png', // icon path, 48x48
				'sticky'      : false,             // if true, timeout is ignored
				'timeout'     : 4,                 // disappears after 6 seconds
				'dismissable' : true               // can be dismissed manually
				});
            
            document.getElementById("game_add_to_menu").reset();
            }
        }
        xmlhttp.open("GET","../menus/db_menu_disk.php?action=add_title_to_menu&software_id="+software_id+"&menu_disk_id="+menu_disk_id+"&software_type="+software_type,true);
        xmlhttp.send();
    } 
}
function deleteGamefromMenu(str,menu_disk_id) {

            // CONFIRM REQUIRES ONE ARGUMENT 
         var message = "Are you sure you want to delete this title from this menu disk????"; 
         // CONFIRM IS BOOLEAN. THAT MEANS THAT 
         // IT RETURNS TRUE IF 'OK' IS CLICKED 
         // OTHERWISE IT RETURN FALSE 
         var return_value = confirm(message); 
 
		document.getElementById("menu_disk_title_id"+str).checked = false;
		
         if (return_value !="0") 
         { 

			if (str == "") {
        document.getElementById("menu_software_list").innerHTML = "";
        return;
    } else { 
        if (window.XMLHttpRequest) {
            // code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        } else {
            // code for IE6, IE5
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange = function() {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                document.getElementById("menu_software_list").innerHTML = xmlhttp.responseText;
                
                 $.notify_osd.create({
				'text'        : 'Title deleted from menudisk.',             // notification message
				'icon'        : '../templates/0/icons/star.png', // icon path, 48x48
				'sticky'      : false,             // if true, timeout is ignored
				'timeout'     : 4,                 // disappears after 6 seconds
				'dismissable' : true               // can be dismissed manually
				});
                
            }
        }
        xmlhttp.open("GET","../menus/db_menu_disk.php?action=delete_from_menu_disk&menu_disk_title_id="+str+"&menu_disk_id="+menu_disk_id,true);
        xmlhttp.send();
			}		 
         }  
}

function addCreditstoMenu(menu_disk_id) {
 if (menu_disk_id == "") {
        document.getElementById("menu_credit_list").innerHTML = "";
        return;
    } else { 
        if (window.XMLHttpRequest) {
            // code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        } else {
            // code for IE6, IE5
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange = function() {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                document.getElementById("menu_credit_list").innerHTML = xmlhttp.responseText;
            }
        }
        
        var ind_id = document.getElementById("menu_credits_form").elements.namedItem("ind_id").value;
        var author_type_id = document.getElementById("menu_credits_form").elements.namedItem("author_type_id").value;
        
        xmlhttp.open("GET","../menus/db_menu_disk.php?action=add_intro_credits&author_type_id="+author_type_id+"&menu_disk_id="+menu_disk_id+"&ind_id="+ind_id,true);
        xmlhttp.send();
    } 
}

function DeleteCredits(menu_disk_credits_id,menu_disk_id) {

            // CONFIRM REQUIRES ONE ARGUMENT 
         var message = "Are you sure you want to delete this person from the credit list????"; 
         // CONFIRM IS BOOLEAN. THAT MEANS THAT 
         // IT RETURNS TRUE IF 'OK' IS CLICKED 
         // OTHERWISE IT RETURN FALSE 
         var return_value = confirm(message); 
 
         if (return_value !="0") 
         { 

			if (menu_disk_credits_id == "") {
        document.getElementById("menu_credit_list").innerHTML = "";
        return;
    } else { 
        if (window.XMLHttpRequest) {
            // code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        } else {
            // code for IE6, IE5
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange = function() {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                document.getElementById("menu_credit_list").innerHTML = xmlhttp.responseText;
            }
        }
        xmlhttp.open("GET","../menus/db_menu_disk.php?action=delete_menu_disk_credits&menu_disk_credits_id="+menu_disk_credits_id+"&menu_disk_id="+menu_disk_id,true);
        xmlhttp.send();
			}		 
         }  
}

function ChangeState(state_id,menu_disk_id) {
	
	var str2 = "diskedit_ajax_";
	var disk_edit_ajax = str2.concat(menu_disk_id);
	
 if (menu_disk_id == "") {
        document.getElementById(disk_edit_ajax).innerHTML = "";
        return;
    } else { 
        if (window.XMLHttpRequest) {
            // code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        } else {
            // code for IE6, IE5
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange = function() {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                document.getElementById(disk_edit_ajax).innerHTML = xmlhttp.responseText;
                
                 $.notify_osd.create({
				'text'        : 'Update status of menudisk!.',             // notification message
				'icon'        : '../templates/0/icons/star.png', // icon path, 48x48
				'sticky'      : false,             // if true, timeout is ignored
				'timeout'     : 4,                 // disappears after 4 seconds
				'dismissable' : true               // can be dismissed manually
				});
                
            }
        }
        
      
        xmlhttp.open("GET","../menus/db_menu_disk.php?action=change_menu_disk_state&state_id="+state_id+"&menu_disk_id="+menu_disk_id,true);
        xmlhttp.send();
    } 
}

</script>
{/block}
{block name=title}Menus Search results{/block}
{block name=left_tile}
<div class="standard_tile">
	<h1>SET OPTIONS</h1>
	<div class="standard_tile_line"></div>
	<div class="standard_table_center">
		<br>
		<form action="../menus/menus_disk_list.php" method="get" name="post" id="menu_set_change">
			<select name="menu_sets_id" id="quick_search_pub_select" onchange="this.form.submit()">
				<option value="" selected style="background-color:white;">Change Menu Set</option>
				{foreach from=$menu_set_list item=line}	
					{html_options values=$line.menu_sets_id output=$line.menu_sets_name}
				{/foreach}
			</select>
		</form>	
		<br>
		<div class="standard_tile_line"></div>
		<br>
		{* Name set *}
		<form action="../menus/db_menu_disk.php" method="post" name="post" id="menu_edit">
			<b>Menu set Editor</b><br><br>
			Change name of menu set:<br>
			<input type="text" name="menu_sets_name" value="{$menu_set.menu_sets_name}" class="standard_tile_input_small"><br/>
			<input type="hidden" name="menu_sets_id" value="{$menu_set.menu_sets_id}">
			<input type="hidden" name="action" value="menu_set_name_update">
			<br>
			<input type="submit" value="Update" class="quick_search_games_button">
			</form>
		<br>
		<div class="standard_tile_line"></div>
		<br>
		{* Add crew section *}
		<b>Crew Editor</b><br>
		<br>
		Set Crew for menu set:<br>
		<form action="../menus/db_menu_disk.php" method="post" name="post_menu_crew_set" id="menu_crew_set">
			<select name="crew_browse" size="1" id="quick_search_small_select" onchange="browseCrew(this.value)">
				{html_options values=$az_value output=$az_output}
			</select>
			{* Ajax *}
			<div id="option_crew">
				<select name="crew_id" id="quick_search_pub_select">
					<option value="" selected>-</option>
					{foreach from=$crew item=line}	
						{html_options values=$line.crew_id output=$line.crew_name}
					{/foreach}
				</select>
			</div>
			<br>
			<input type="submit" value="Set" class="quick_search_games_button">
			<input type="hidden" name="menu_sets_id" value="{$menu_set.menu_sets_id}">
			<input type="hidden" name="action" value="menu_set_crew_set">
		</form>
		<br>
		{if isset($connected_crew)}
		{foreach from=$connected_crew item=line}	
		 {$line.crew_name} - <a href="#" class="standard_tile_link" onclick="CrewDelete({$line.crew_id});">Delete</a><br>
		{/foreach}
		{/if}
		<br>
		<div class="standard_tile_line"></div>
		<br>
		Quick add new Crew to db:
		<form action="../menus/db_menu_disk.php" method="post" name="post_menu_crew_add" id="menu_crew_add">
			<input type="text" name="new_crew_name" value="" class="standard_tile_input_small">
			<br>
			<br>
			<input type="submit" value="Add" class="quick_search_games_button">
			<input type="hidden" name="menu_sets_id" value="{$menu_set.menu_sets_id}">
			<input type="hidden" name="action" value="menu_set_crew_add">
		</form>
		{* END crew section *}
		<br>
	</div>
</div>
<br>
{include file='1/admin/left_nav.html'}
{/block}

{block name=main_tile}
<div class="standard_tile">
	<h1>EDIT SET</h1>
	<div class="standard_tile_line"></div>
	<div class="standard_tile_text">
		<div class="left_nav_section">
			Overhere you can edit/delete menu set <b>{$menu_set.menu_sets_name}</b>, or you can add menu disks to it. You can also make the set available on the website with the publish options.
		</div> 
		<br>
		<div class="main_company_container">
			<div class="main_company_child" id="child_edit_company" style="text-align:left;">
				<fieldset>
					<legend>More options</legend>
						<a class="left_nav_link" onclick="addNewdisk()" style="cursor: pointer;">Add New Disk</a> to set
						<br>
						<a class="left_nav_link" onclick="" style="cursor: pointer;">Delete set</a>
				</fieldset> 
			</div>
			<div class="main_company_child" id="child_add_company" style="text-align:left;">
				<fieldset>
					<legend>Publish Set</legend>
						<input type="radio" name="publish" value="online" checked> Online<br>
						<input type="radio" name="publish" value="offline" checked> Offline<br>
				</fieldset> 
			</div>
		</div>
		<br>
		<br>
		<table class="standard_table_list" id="game_list_table">
			<tr>
				<th id="menu_disk_list_th">Menu Disk</th>
				<th id="menu_list_crew_th">Crew</th>
				<th id="menu_year_th">Year</th>
				<th id="menu_state_th">State</th>
			</tr>
			{if isset($menus)}
				{foreach from=$menus item=line}
					<tr id="diskedit_ajax_{$line.menu_disk_id}">
						<td class="menu_disk_list_td">{if $line.menu_disk_id != ''}<a onclick="editDisk({$line.menu_disk_id})" style="cursor: pointer;" class="MAINNAV">{$line.menu_disk_name}</a>{else}<i>n/a</i>{/if}</td>
						<td class="menu_list_crew_td">{if isset($line.crew_id)}{$line.crew_name}{else}<i>n/a</i>{/if}</td>
						<td class="menu_year_td"><i>n/a</i></td>				
						<td class="menu_state_td">{if isset($line.menu_state)}{$line.menu_state}{else}<i>n/a</i>{/if}</td>
					</tr>
				{/foreach}
			{/if}
			<tr>
				<td class="standard_table_left" colspan="4">
					<b>{if $nr_of_entries == 1}1 menu disk found {else} {$nr_of_entries} menu disks found{/if} in {$querytime} sec </b>
				</td>
			</tr>
		</table>
	</div>
</div>
<br>
<div class="standard_table_center"><a href="javascript:history.go(-1)" class="standard_tile_link">back</a></div>
<br>
{/block}
