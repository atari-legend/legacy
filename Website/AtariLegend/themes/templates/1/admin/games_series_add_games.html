{*
/***************************************************************************
*                                games_series_add_games.html
*                            -----------------------------------
*   begin                : ?
*   copyright            : (C) 2005 Atari Legend
*   email                : maarten.martens@freebel.net
*   actual update        : created this page
*
*   Id: games_series_add_games.html.html,v 0.10 ? Silver Surfer
*   Id: games_series_add_games.html,v 0.15 2016/07/24 STG
*                   - AL 2.0
*
***************************************************************************/

************************************************************************************************
The game series add games page
************************************************************************************************
*}

{extends file='1/admin/frontpage.html'}

{block name=java_script}
<script>
function browseGame(str) {
    if (str == "") {
        document.getElementById("game_list").innerHTML = "";
        return;
    } else {
        if (window.XMLHttpRequest) {
            // code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        } else {
            // code for IE6, IE5
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange = function() {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                document.getElementById("game_list").innerHTML = xmlhttp.responseText;
            }
        }
        xmlhttp.open("GET","../games/ajax_games_series.php?action=game_browse&query="+str,true);
        xmlhttp.send();
    }
}

function searchGame(str) {
    if (str == "") {
        str = "empty";
            xmlhttp.onreadystatechange = function() {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                document.getElementById("gamesearch").innerHTML = xmlhttp.responseText;
            }
        }

    } else {
        if (window.XMLHttpRequest) {
            // code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        } else {
            // code for IE6, IE5
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange = function() {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                document.getElementById("gamesearch").innerHTML = xmlhttp.responseText;
            }
        }
        if (str.length >= 3) {
        xmlhttp.open("GET","../games/ajax_games_series.php?action=game_search&query="+str,true);
        xmlhttp.send();
    }
    }
}

function deleteseries()
{
    // CONFIRM REQUIRES ONE ARGUMENT
    var message = "Are you sure you want to delete this Serie?";
    // CONFIRM IS BOOLEAN. THAT MEANS THAT
    // IT RETURNS TRUE IF 'OK' IS CLICKED
    // OTHERWISE IT RETURN FALSE
    var return_value = confirm(message);

    if (return_value !="0")
    {
        url="../games/db_games_series.php?action=delete_gameseries&amp;game_series_id={if isset($series_info.game_series_id)}{$series_info.game_series_id}{/if}";
        location.href=url;
    }
}
</script>
{/block}

{block name=title}Game Series{/block}

{block name=main_tile}
<div class="standard_tile" id="games_series_add_games">
    <h1>{$series_info.game_series_name}</h1>
    <div class="standard_tile_line"></div>
    <div class="standard_tile_padding">
        <div class="left_nav_section">
            Over here you can add games to a series.
        </div>
        <br>
        <br>
        <fieldset class="primary_fieldset centered_fieldset">
        <legend class="primary_legend">Series options</legend>
            <a style="cursor: pointer;" onClick="deleteseries(); return false;" class="left_nav_link">
                Delete series
            </a>
            <br>
            <a href="../games/games_series_add_games.php?series_page=addgames_series&amp;game_series_id={if isset($series_info.game_series_id)}{$series_info.game_series_id}{/if}" class="left_nav_link">
                Add games
            </a>
        </fieldset>
        <br>
        <br>
        <fieldset class="primary_fieldset centered_fieldset">
            <legend class="primary_legend">Search games</legend>
                <form action="../games/games_series_add_games.php" method="post" name="game_search" id="game_search">
                <div style="display: inline;align-items:center;margin: 0 auto;text-align:center;">
                    <span style="margin-right:10px;"><strong>By name :</strong></span>
                    <select name="gamebrowse" class="standard_select select_small">
                        <option value="" SELECTED>-</option>
                        {html_options values=$az_value output=$az_output}
                    </select>
                    <input type="text" name="gamesearch" class="standard_input input_large">
                    <br>
                    <br>
                    <input type="hidden" name="action" value="add_games_search">
                    <input type="hidden" name="game_series_id" value="{$series_info.game_series_id}">
                    <input type="submit" value="Search" class="topbutton_cpanel_small">
                    <br>
                </div>
                </form>
        </fieldset>
        <br>
        <br>
        <form action="../games/db_games_series.php" method="post" name="add_to_series" id="add_to_series">
        {if (isset($series_link))}
            <table class="secondary_table_list table_md table_hover">
                <tr>
                    <th class="w-5">Info</th>
                    <th class="game_name_column w-40">Game Name</th>
                    <th class="publisher_table_column w-20">Publisher</th>
                    <th class="developer_table_column w-20">Developer</th>
                    <th class="release_year_column w-10">Year</th>
                </tr>
                {foreach from=$series_link item=line}
                    <tr>
                        <td class="w-5">
                            <div class="checkbox">
                                <input type="checkbox" id="{$line.game_id}" name="game_id[]" value="{$line.game_id}">
                                <label for="{$line.game_id}"></label>
                            </div>
                        </td>
                        <td class="game_name_column w-40">{if $line.game_name != ''}<a href="games_detail.php?game_id={$line.game_id}" class="standard_tile_text_left">{$line.game_name}</a>
                                {else}<i>n/a</i>{/if}
                        </td>
                        <td class="publisher_table_column w-20">{if $line.publisher_name != ''}
                                <a href="games_main.php?publisher={$line.publisher_id}&amp;action=search" class="standard_tile_text_left">
                                    {$line.publisher_name}
                            </a>
                                {else}
                                    <i>n/a</i>
                                {/if}</td>
                        <td class="developer_table_column w-20">{if $line.developer_name != ''}
                                <a href="games_main.php?developer={$line.developer_id}&amp;action=search" class="standard_tile_text_left">
                                    {$line.developer_name}
                                </a>
                                {else}
                                    <i>n/a</i>
                                {/if}</td>
                        <td class="release_year_column w-10">
                            {if $line.year != ''}
                                <a href="games_main.php?year={$line.year}&amp;action=search" class="standard_tile_text_left">
                                    {$line.year}
                                </a>
                                {else}
                                    <i>n/a</i>
                                {/if}
                            </td>
                    </tr>
                {/foreach}
                <tr>
                    <td class="game_list_footer" colspan="5" style="width:100%;">
                        <input type="hidden" name="series_page" value="series_editor">
                        <input type="hidden" name="action" value="add_to_series">
                        <input type="hidden" name="game_series_id" value="{if isset($series_info.game_series_id)}{$series_info.game_series_id}{/if}">
                        <img src="../../../themes/templates/1/includes/img/arrow_ltr.gif" alt="" width="38" height="22" style="float:left;">
                        <input type="submit" value="Add" class="topbutton_cpanel_small">
                    </td>
                </tr>
            </table>
        {else}
            <div class="left_nav_section">
                No entries found for your query
            </div>
        {/if}
        </form>
        <br>
        <div class="standard_tile_text_center"><a href="../games/games_series_editor.php?series_page=series_editor&game_series_id={$series_info.game_series_id}" class="standard_tile_link">back</a></div>
    </div>
</div>
{/block}
