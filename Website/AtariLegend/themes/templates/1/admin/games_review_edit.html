{*
/***************************************************************************
*                                games_review_edit.html
*                            --------------------------
*   begin                : Sunday, december 04, 2005
*   copyright            : (C) 2005 Atari Legend
*   email                : maarten.martens@freebel.net
*   actual update        : created this page
*
*   Id: games_review_edit.html,v 0.10 2005/12/04 Gatekeeper
*   Id: games_review_edit.html,v 0.20 2016/07/23 ST Graveyard
*                   -AL 2.0
*   Id: games_review_edit.html,v 0.21 2017/02/26 ST Graveyard
*                   Remove the hotspot button
*   Id: games_review_edit.html,v 0.22 2017/05/18 ST Graveyard
*                   add screenstar button
*   Id: games_review_edit.html,v 0.23 2017/05/24 08:38 ST Graveyard
*                   added the [frontpage] functionality
*   Id: games_review_edit.html,v 0.24 2017/09/01 10:20 ST Graveyard
*                  - added some tweaks for review submissions
***************************************************************************/

///****************************************************************************************
// This is the sub template file to generate the reviews edit page
//****************************************************************************************
*}
{extends file='1/admin/main.html'}

{block name=java_script}
<script src="{$template_dir}includes/js/bbcode.js"></script> <!-- Load the BBCODE script -->
<script src="{$template_dir}includes/js/game_review.js"></script> <!-- Load all game review scripts -->
<script src="{$template_dir}includes/js/ui.widgets.js"></script> <!-- The autocomplete and dropdown switcher -->
{/block}

{block name=title}Edit review - <a href="../games/games_detail.php?game_id={$game.game_id}">{$game.game_name}</a>{/block}

{block name=main_tile}
<div class="standard_tile" id="games_review_edit">
    <div class="help-tip">
        <p> - Use the 'Screenstar' button to mark the text used in the screenstar tile on the website.<br><br>
            - Use the 'Frontpage' button to mark the text used in the 'latest reviews' tile on the website.<br>
            <i>Keep in mind the dotdotdot (...) truncate function is also active on this text, so should you mark a piece of text which is too big for the tile,
            this will be truncated automatically to fit the page.</i></p>
    </div>
    <h1>{$game.game_name}</h1>
    <div class="standard_tile_line"></div>
    <div class="standard_tile_padding">
        <div class="left_nav_section">
            At this page you can edit or delete an existing review in the AL database.
        </div>
        <br>
        <br>
        <form action="../games/db_games_review_edit.php" method="post" name="post">
            <fieldset class="secondary_fieldset">
                <legend class="primary_legend">Edit review</legend>
                <br>
                <div style="display:inline-block;">
                    <b>Written by : </b><br>
                    <select name="members"
                        data-alt-autocomplete-endpoint="../../../php/admin/common/autocomplete.php?extraParams=admin-user"
                        data-alt-autocomplete-toggle="#members_select_toggle"
                        id="member_select" class="standard_select select_large">
                        <option value="-">-</option>
                        {foreach from=$authors item=line}
                            {if $edit_review.member_id == $line.user_id}
                                <option value="{$line.user_id}" selected>{$line.user_name}</option>
                            {else}
                                <option value="{$line.user_id}">{$line.user_name}</option>
                            {/if}
                        {/foreach}
                    </select>
                    <a href="javascript:;" class="left_nav_link" id="members_select_toggle" ><i class="fa fa-chevron-circle-down" aria-hidden="true" ></i></a>
                </div>
                <br>
                <br>
                <div style="width:100%;">
                    <div><b>Date :</b></div>
                    <div>{html_select_date time=$edit_review.review_date start_year="2000" class="standard_select"}</div>
                </div>
                <br>
                <br>
                <b>Review :</b>
                <br>
                <input type="button" class="secondary_button" accesskey= "b" name="addbbcode0" value="B" onclick="bbstyle(0,'textfield')">
                <input type="button" class="secondary_button" accesskey= "u" name="addbbcode4" value="U" onclick="bbstyle(4,'textfield')">
                <input type="button" class="secondary_button" accesskey= "i" name="addbbcode2" value="I" onclick="bbstyle(2,'textfield')">
                <input type="button" class="secondary_button" accesskey="w" name="addbbcode6" value="URL" onClick="bbstyle(6,'textfield')">
                <input type="button" class="secondary_button" accesskey="x" name="addbbcode8" value="@" onClick="bbstyle(8,'textfield')">
                <input type="button" class="secondary_button" accesskey="screenstar" name="addbbcode16" value="Screenstar" onClick="bbstyle(16,'textfield')">
                <input type="button" class="secondary_button" accesskey="frontpage" name="addbbcode14" value="Frontpage" onClick="bbstyle(14,'textfield')">
                <textarea name="textfield" rows="15" class="primary_textarea" ONSELECT="javascript:storeCaret(this);" ONCLICK="javascript:storeCaret(this);" ONKEYUP="javascript:storeCaret(this);" ONCHANGE="javascript:storeCaret(this);">{$edit_review.review_text}</textarea>
                <br>
                <br>
                <b>Graphics :</b><br>
                <input type="number" name="graphics" class="standard_input input_large" value="{$edit_review.review_graphics}" min="1" max="10" required><br>
                <b>Sound :</b><br>
                <input type="number" name="sound" class="standard_input input_large" value="{$edit_review.review_sound}" min="1" max="10" required><br>
                <b>Gameplay :</b><br>
                <input type="number" name="gameplay" class="standard_input input_large"  value="{$edit_review.review_gameplay}" min="1" max="10" required><br>
                <b>Conclusion :</b><br>
                <input type="number" name="conclusion" class="standard_input input_large"  value="{$edit_review.review_overall}" min="1" max="10" required><br>
                <br>
                <br>
            </fieldset>
            <br>
            <fieldset class="secondary_fieldset centered_fieldset">
                <legend class="primary_legend">Screenshots</legend>
                <br>
                {if $screenshots_nr <> 0}
                    {foreach from=$screenshots item=line}
                        <img src="../../includes/show_image.php?file={$line.screenshot_link}&amp;resize=200,null,null,null" alt="{$line.screenshot_comment}" style="display:inline;" class="game_screenshot_img">
                        <br>
                        <br>
                        add comment : <br>
                        <textarea rows="4" class="primary_textarea" name="inputfield[]">{$line.screenshot_comment}</textarea>
                        <br>
                        {if $line.screenshot_comment <> ''}
                            <a href="javascript:deletecomment({$game.game_id},{$reviewid},{$line.screenshot_id})" class="left_nav_link">
                                <b>delete comment</b>
                            </a>
                        {/if}
                        <br>
                        <br>
                        <br>
                    {/foreach}
                {else}
                    There are currently no screenshots attached to this game. Go to the<a href="../games/games_detail.php?game_id={$game.game_id}" class="MAINNAV"> screenshot adding</a>
                    page to link specific screenshots to this game.
                {/if}
                <br>
                <br>
                <input type="hidden" name="action" value="{if isset($action) and $action == 'submitted'}submitted{else}edit_review{/if}">
                <input type="hidden" name="game_id" value="{$game.game_id}">
                <input type="hidden" name="reviewid" value="{$reviewid}">
                <input type="submit" name="Create Review" value="{if isset($action) and $action == 'submitted'}Submit review{else}Edit{/if}" class="secondary_button">
                {if isset($action) and $action == 'submitted'}
                    <input type="button" name="delete" value="Delete submission" onclick="deleteSubmission({$reviewid},{$game.game_id})" class="secondary_button">
                {else}
                    <input type="button" name="delete" value="Delete" onclick="deletereview({$reviewid},{$game.game_id})" class="secondary_button">
                {/if}
                <input type="button" name="delete" value="Move to Comments" onclick="move_to_comment({$reviewid},{$game.game_id})" class="secondary_button">
                <br>
                <br>
            </fieldset>
        </form>
        <br>
        <div class="standard_tile_text_center"><a href="javascript:history.go(-1)" class="standard_tile_link">back</a></div>
    </div>
</div>
{/block}
