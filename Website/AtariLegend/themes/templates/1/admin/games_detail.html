{*
/***************************************************************************
*                                games_detail.html
*                            ------------------------
*   begin                : Tuesday, September 11, 2005
*   copyright            : (C) 2005 Atari Legend
*   email                : admin@atarilegend.com
*   actual update        : Creation of file
*
*   Id: games_detail.html,v 0.10 2005/10/11 15:03 Zombieman
*   Id: games_detail.html,v 0.20 2015/11/02 21:26 STG
*   Id: games_detail.html,v 0.30 2015/12/27 21:26 STG - 1920 width/HTML Valid/Messages -- NO FLEXBOX
*   Id: games_detail.html,v 0.31 2017/01/06 STG - added falcon vga and rgb option
*   id: games_detail.html,v 0.32 2017/02/26 22:19 STG - fixed 'write a review link'
*
***************************************************************************/

//****************************************************************************************
// This is the detail page of a game. Change all the specifics over here!
//****************************************************************************************
*}
{extends file='1/admin/main.html'}
{block name=left_tile}
    {include file='1/admin/games_detail_editing.html'}
    <br>

    {include file='1/admin/games_release_list.html'}
    <br>

    {include file='1/admin/quick_search_games.html'}
{/block}

{block name=right_tile}

    <div class="standard_tile text-center">
        <h1>MORE DATA</h1>
        <div class="standard_tile_line"></div>
        <div class="standard_tile_padding">
            <div class="gd_navigator">
                <!--
                <a href="../downloads/downloads_game_detail.php?game_id={$game->getId()}" class="primary_button">Add file download</a>
                -->
                <a href="../games/games_facts.php?game_id={$game->getId()}" class="primary_button">Game facts <span class="help-hint">({$nr_facts})</span></a>
                <a href="../games/games_screenshot_add.php?game_id={$game->getId()}" class="primary_button">Screenshots <span class="help-hint">({$nr_screenshots})</span></a>
                <a href="../magazine/magazine_review_score.php?game_id={$game->getId()}" class="primary_button">Mag review scores <span class="help-hint">({$nr_magazines})</span></a>
                <a href="../games/games_box.php?game_id={$game->getId()}" class="primary_button">Boxscans <span class="help-hint">({$nr_boxscans})</span></a>
                <a href="../games/games_similar.php?game_id={$game->getId()}" class="primary_button">Similar Games <span class="help-hint">({$nr_similar})</span></a>
                <a href="../games/games_review.php?game_id={$game->getId()}" class="primary_button">Reviews <span class="help-hint">({$nr_reviews})</span></a>
                {if $nr_comments > 0}
                    <a href="../games/games_comment.php?game_id={$game->getId()}" class="primary_button">Moderate comments</a>
                {/if}
            </div>
            <br>
        </div>
    </div>
    <br>
    {include file='1/main/tile_bug_report.html'}
{/block}
{block name=java_script}
<script>

function delete_publisher() {
    document.getElementById('publisher').method="post";
    document.getElementById('publisher').action="../games/db_games_detail.php?action=delete_publisher";
    document.getElementById('publisher').submit();
}

function add_publisher() {
    document.getElementById('publisher').method="post";
    document.getElementById('publisher').action="../games/db_games_detail.php?action=add_publisher";
    document.getElementById('publisher').submit();
}

function delete_developer() {
    document.getElementById('developer').method="post";
    document.getElementById('developer').action="../games/db_games_detail.php?action=delete_developer";
    document.getElementById('developer').submit();
}

function add_developer() {
    document.getElementById('developer').method="post";
    document.getElementById('developer').action="../games/db_games_detail.php?action=add_developer";
    document.getElementById('developer').submit();
}

function delete_creator() {
    document.getElementById('creator').method="post";
    document.getElementById('creator').action="../games/db_games_detail.php?action=delete_creator";
    document.getElementById('creator').submit();
}

function add_creator() {
    document.getElementById('creator').method="post";
    document.getElementById('creator').action="../games/db_games_detail.php?action=add_creator";
    document.getElementById('creator').submit();
}

function browseCompany(str) {
    if (str == "") {
        $('#ajax_publisher_browse').html('');
    } else {
        $.ajaxQueue({
            // The URL for the request
            url: '../games/ajax_games_detail.php',
            data: 'action=company_publisher_browse&query='+str,
            type: 'GET',
            dataType: 'html',
            // Code to run if the request succeeds;
            success: function (html) {
                $('#ajax_publisher_browse').html(html);
            }
        });
    }
}
function browseDeveloper(str) {
    if (str == "") {
        $('#ajax_developer_browse').html('');
    } else {
        $.ajaxQueue({
            // The URL for the request
            url: '../games/ajax_games_detail.php',
            data: 'action=company_developer_browse&query='+str,
            type: 'GET',
            dataType: 'html',
            // Code to run if the request succeeds;
            success: function (html) {
                $('#ajax_developer_browse').html(html);
            }
        });
    }
}

$('#input-tags3').selectize({
    plugins: ['remove_button'],
    delimiter: ',',
    persist: false,
    create: function(input) {
        return {
            value: input,
            text: input
        }
    }
});

</script>
{/block}

{block name=main_tile}
<div class="standard_tile" id="games_detail">
    {if isset ($game_info)}
        <h1>{$game_info.game_name}</h1>
        <div class="standard_tile_line"></div>
        <div class="standard_tile_padding">
            <fieldset class="secondary_fieldset">
                <legend class="primary_legend">Basic game info - help</legend>
                        Overhere you can add additional game info. Just select what you think is necessary, and press the modify button to link it all to the game.
                        When you press the delete button, the complete game and all table entries linked to this game entity will be removed from the database!
            </fieldset>
            <br>
            <div>
                <div class="comments_post_box">
                    <div class="comment_post_detail">
                        <h4 class="comments_title">
                                Basic game info
                        </h4>
                        <ul class="comment_buttons">
                            <li class="primary_button">
                                <a href="../games/db_games_detail.php?game_id={$game->getId()}&amp;action=delete_game"
                                    onclick="javascript:return confirm('The game will be deleted')">
                                    <i class="fa fa-trash" aria-hidden="true"></i>
                                </a>
                            </li>
                            <div class="comments_button_dropdown" data-dropdown-id="{$game_info.game_id}">
                                <li class="primary_button">
                                    <a class="links_addnew_link">
                                            <i class="fa fa-bars" aria-hidden="true"></i>
                                    </a>
                                </li>
                                <div class="dropdown_box" id="dropdown_box{$game_info.game_id}">
                                    <li class="dropdown_item jsCommentsDeleteDropdownItem" data-comments-id="{$game_info.game_id}">
                                        Delete
                                    </li>
                                </div>
                            </div>
                        </ul>
                        <div class="comments_line" id="line_above_info"></div>
                        <form action="../games/db_games_detail.php" method="post" name="edit">
                            <input type="hidden" name="game_id" value="{$game->getId()}">
                            <input type="hidden" name="action" value="modify_game">
                            <h4 class="comments_title_phoneview">
                                    Basic game info
                            </h4>
                            <div class="comments_post_info">
                                Last updated <span>by <a href="../user/user_detail.php?user_id_selected=">Silver Surfer</a></span> on November 30, 2017
                            </div>
                            <div class="comments_line" id="line_below_info"></div>
                            <div class="comment_post_text" id="jsCommentTextBox{$game_info.game_id}">
                                <br>
                                <b>Game name :</b> <input type="text" maxlength="255" name="game_name" value="{$game_info.game_name}" class="standard_input input_large">
                                <br>

                                <br>
                                <div id="gd_basic_game_info_1">
                                    <div class="gd_basic_game_info_row">
                                        <div class="gd_basic_game_info_row_check">
                                            <div class="links_mod_checkbox">
                                                <input type="checkbox" id="unreleased" name="unreleased" value="1" {if $game_info.game_unreleased == 1} checked{/if}>
                                                <label for="unreleased"></label>
                                            </div>
                                        </div>
                                        <div class="gd_basic_game_info_row_checktxt">Unreleased&nbsp;</div>
                                    </div>
                                    <div class="gd_basic_game_info_row">
                                        <div class="gd_basic_game_info_row_check">
                                            <div class="links_mod_checkbox">
                                                <input type="checkbox" id="development" name="development" value="1" {if $game_info.game_development == 1} checked{/if}>
                                                <label for="development"></label>
                                            </div>
                                        </div>
                                        <div class="gd_basic_game_info_row_checktxt">In development&nbsp;</div>
                                    </div>

                                    <div class="gd_basic_game_info_row">
                                        <div class="gd_basic_game_info_row_check">
                                            <div class="links_mod_checkbox">
                                                <input type="checkbox" id="unfinished" name="unfinished" value="1" {if $game_info.game_unfinished == 1} checked{/if}>
                                                <label for="unfinished"></label>
                                            </div>
                                        </div>
                                        <div class="gd_basic_game_info_row_checktxt">Unfinished&nbsp;</div>
                                    </div>
                                    <div class="gd_basic_game_info_row">
                                        <div class="gd_basic_game_info_row_check">
                                            <div class="links_mod_checkbox">
                                                <input type="checkbox" id="wanted" name="wanted" value="1" {if $game_info.game_wanted <> ''} checked{/if}>
                                                <label for="wanted"></label>
                                            </div>
                                        </div>
                                        <div class="gd_basic_game_info_row_checktxt">Wanted&nbsp;</div>
                                    </div>
                                    <div class="gd_basic_game_info_row">
                                        <div class="gd_basic_game_info_row_check">
                                            <div class="links_mod_checkbox">
                                                <input type="checkbox" id="arcade" name="arcade" value="1" {if $game_info.game_arcade == 1} checked{/if}>
                                                <label for="arcade"></label>
                                            </div>
                                        </div>
                                        <div class="gd_basic_game_info_row_checktxt">Arcade conversion&nbsp;</div>
                                    </div>
                                    <div class="gd_basic_game_info_row">
                                        <div class="gd_basic_game_info_row_check">
                                            <div class="links_mod_checkbox">
                                                <input type="checkbox" id="seuck" name="seuck" value="1" {if $game_info.game_seuck == 1} checked{/if}>
                                                <label for="seuck"></label>
                                            </div>
                                        </div>
                                        <div class="gd_basic_game_info_row_checktxt">SEUCK game&nbsp;</div>
                                    </div>
                                    <div class="gd_basic_game_info_row">
                                        <div class="gd_basic_game_info_row_check">
                                            <div class="links_mod_checkbox">
                                                <input type="checkbox" id="stos" name="stos" value="1" {if $game_info.game_stos == 1} checked{/if}>
                                                <label for="stos"></label>
                                            </div>
                                        </div>
                                        <div class="gd_basic_game_info_row_checktxt">STOS game&nbsp;</div>
                                    </div>
                                    <div class="gd_basic_game_info_row">
                                        <div class="gd_basic_game_info_row_check">
                                            <div class="links_mod_checkbox">
                                                <input type="checkbox" id="stac" name="stac" value="1" {if $game_info.game_stac == 1} checked{/if}>
                                                <label for="stac"></label>
                                            </div>
                                        </div>
                                        <div class="gd_basic_game_info_row_checktxt">STAC game&nbsp;</div>
                                    </div>
                                </div>
                                <br>
                                <br>
                            </div>
                            <div class="demo">
                            <b>Category</b>
                            <div class="control-group">
                                <label for="input-tags"></label>
                                <select name="category[]" multiple id="input-tags" class="standard_select" size="1">
                                {foreach from=$cat item=line}
                                    <option value="{$line.cat_id}" {$line.cat_selected}>{$line.cat_name}</option>
                                {/foreach}
                                </select>
                            </div>
                            <script>
                                $('#input-tags').selectize({
                                plugins: ['remove_button'],
                                persist: false,
                                create: true,
                                render: {
                                    item: function(data, escape) {
                                return '<div class="primary_button" style="border-radius:5px;">' + escape(data.text) + '</div>';
                                }
                                },
                                onDelete: function(values) {
                                return confirm(values.length > 1 ? 'Are you sure you want to remove these ' + values.length + ' items?' : 'Are you sure you want to remove "' + values[0] + '"?');
                                }
                                });
                            </script>
                            </div>

                            <input type="submit" name="valider" value="Modify" class="secondary_button">
                        </form>
                    </div>
                </div>
            </div>
            <div>
                <div class="comments_post_box">
                    <div>
                        <br>
                        <div class="comments_line"></div>
                        <br>

                        <b>Development info - help</b><br>
                        You can add as many developers/creators as you like to a game.
                        Use the continent dropdown for example to add in which part of the world
                        the game was released by that particular Publisher. The info dropdown
                        is used for adding budget release info, or arcade release info.<br>
                        <br>
                        <br>
                        <b>Creator info</b><br>
                        <form action="../games/db_games_detail.php" method="post" name="creator" id="creator">
                            {if isset($game_author)}
                                {foreach from=$game_author item=line}
                                    <div class="checkbox_alt" style="display:inline;">
                                        <input type="checkbox" id="{$line.game_author_id}" name="game_author_id[]" value="{$line.game_author_id}">
                                        <label for="{$line.game_author_id}"></label>


                                        <input type="text" maxlength="255" name="game_name" value="{$line.ind_name}" class="standard_input input_large" disabled>


                                        <select name="author_type_id{$line.game_author_id}" class="standard_select select_medium">
                                        <option value="-">-</option>
                                        {foreach from=$author_types item=line2}
                                            <option value="{$line2.author_type_id}"{if $line2.author_type eq $line.auhthor_type_info} selected{/if}>{$line2.author_type}</option>
                                        {/foreach}
                                        </select>

                                    </div>
                                    <br>
                                {/foreach}
                                <img src="../../../themes/templates/1/includes/img/arrow_ltr.gif" alt="" width="38" height="22" style="display:inline;">
                                <input type="button" name="valider" value="Delete" onclick="delete_creator()" class="secondary_button" style="display:inline;">
                                <br>
                                <br>
                            {/if}
                            <b>Name</b>
                            <select name="ind_id" id="ind_id" class="standard_select select_medium">
                            <option value="-" selected="selected">-</option>
                            {foreach from=$individuals item=line}
                                <option value="{$line.ind_id}">{$line.ind_name}</option>
                            {/foreach}
                            </select>

                            <b>Job</b>
                            <select name="author_type_id" class="standard_select select_medium">
                            <option value="-" selected="selected">-</option>
                            {foreach from=$author_types item=line}
                                <option value="{$line.author_type_id}">{$line.author_type}</option>
                            {/foreach}
                            </select>


                            <input type="hidden" name="game_id" value="{$game_id}">
                            <input type="button" value="Add" onclick="add_creator()" class="secondary_button">
                        </form>
                        <br>
                        <br>
                        <div class="comments_line"></div>
                        <br>

                        <b>Company</b><br>
                        <br>
                        <form action="../games/db_games_detail.php" method="post" name="developer" id="developer">
                            {if isset($developer)}
                                {foreach from=$developer item=line}
                                    <div class="links_mod_checkbox">
                                        <input type="checkbox" id="game_developer_id[{$line.pub_id}]" name="game_developer_id[]" value="{$line.pub_id}">
                                        <label for="game_developer_id[{$line.pub_id}]"></label>&nbsp;
                                        <a href="../company/company_edit.php?comp_id={$line.pub_id}" class="left_nav_link">{$line.pub_name}</a> {if $line.continent <> '' }<b>({$line.continent})</b>{/if} {if  $line.extra_info <> '' }<b>({$line.extra_info})</b>{/if}
                                    </div>
                                    <br>
                                {/foreach}
                                <img src="../../../themes/templates/1/includes/img/arrow_ltr.gif" alt="" width="38" height="22" style="display:inline;">
                                <input type="button" name="valider" value="Delete" onclick="delete_developer()" class="secondary_button" style="display:inline;">
                                <br>
                                <br>
                            {/if}
                            <table>
                            <tr>
                                <td>
                                    <select name="developerbrowse" onchange="browseDeveloper(this.value)" class="standard_select select_small">
                                        <option value="" SELECTED>-</option>
                                        {html_options values=$az_value output=$az_output}
                                    </select>
                                </td>
                                <td>
                                    <div id="ajax_developer_browse">
                                        <select name="company_id_dev" class="standard_select select_medium">
                                            <option value="-" selected="selected">-</option>
                                            {foreach from=$company item=line}
                                                <option value="{$line.comp_id}">{$line.comp_name}</option>
                                            {/foreach}
                                        </select>
                                    </div>
                                </td>
                                <td>
                                    <b>Name</b>
                                </td>
                            </tr>
                            </table>

                            <br/>
                            <select name="game_extra_info_dev" class="standard_select select_medium">
                                <option value="-" selected="selected">-</option>
                                {foreach from=$game_extra_info item=line}
                                    <option value="{$line.game_extra_info_id}">{$line.game_extra_info}</option>
                                {/foreach}
                            </select>
                            <b>Extra Info</b>
                            <br><br>
                            <input type="hidden" name="game_id" value="{$game_id}">
                            <input type="button" value="Add" onclick="add_developer()" class="secondary_button">
                        </form>
                        <br>
                    </div>
                </div>
                <br>
            </div>

            <div>
                <div id="gd_game_aka">
                    <form action="../games/db_games_detail.php" method="post" name="aka" id="aka">
                    <fieldset class="secondary_fieldset">
                        <legend class="primary_legend">Add game AKA</legend>
                        <b>Game AKA :</b> <input type="text" name="game_aka"  class="standard_input input_large">
                        <br>
                        <br>
                        <input type="submit" name="valider" value="Add" class="secondary_button">
                        <input type="hidden" name="action" value="game_aka">
                        <input type="hidden" name="game_id" value="{$game_id}">
                        {if $nr_aka <> 0}
                            <br>
                            <br>
                            <b>Current AKA</b>
                            <br>
                            {foreach from=$aka item=line}
                                <a href="../games/games_detail.php?game_id={$line.game_id}" class="left_nav_link">
                                    {$line.game_aka_name}
                                </a> - <b>
                                <a href="../games/db_games_detail.php?game_aka_id={$line.game_aka_id}&action=delete_aka&game_id={$line.game_id}" class="left_nav_link">delete</a></b>
                                <br>
                            {/foreach}
                        {/if}
                    </fieldset>
                    </form>
                </div>
                <br>
                <div id="gd_publisher_info">
                <fieldset class="secondary_fieldset">
                    <legend class="primary_legend">Publisher info</legend>
                    <form action="../games/db_games_detail.php" method="post" name="publisher" id="publisher">
                        {if isset($publisher)}
                            {foreach from=$publisher item=line}
                                <div class="links_mod_checkbox">
                                    <input type="checkbox" id="game_publisher_id[{$line.pub_id}]" name="game_publisher_id[]" value="{$line.pub_id}">
                                    <label for="game_publisher_id[{$line.pub_id}]"></label>&nbsp;
                                    <a href="../company/company_edit.php?comp_id={$line.pub_id}" class="left_nav_link">{$line.pub_name}</a> {if $line.continent <> '' }<b>({$line.continent})</b>{/if} {if  $line.extra_info <> '' }<b>({$line.extra_info})</b>{/if}
                                </div>
                                <br>
                            {/foreach}
                            <img src="../../../themes/templates/1/includes/img/arrow_ltr.gif" alt="" width="38" height="22" style="display:inline;">
                            <input type="button" name="valider" value="Delete" onclick="delete_publisher()" class="secondary_button" style="display:inline;">
                            <br>
                            <br>
                        {/if}
                        <table>
                        <tr>
                            <td>
                                <select name="companybrowse" onchange="browseCompany(this.value)" class="standard_select select_small">
                                    <option value="" SELECTED>-</option>
                                    {html_options values=$az_value output=$az_output}
                                </select>
                            </td>
                            <td>
                                <div id="ajax_publisher_browse">
                                    <select name="company_id_pub" class="standard_select select_medium">
                                        <option value="-" selected="selected">-</option>
                                        {foreach from=$company item=line}
                                            <option value="{$line.comp_id}">{$line.comp_name}</option>
                                        {/foreach}
                                    </select>
                                </div>
                            </td>
                            <td>
                                <b>Name</b>
                            </td>
                        </tr>
                        </table>
                        <br>
                        <select name="continent_pub" class="standard_select select_medium">
                            <option value="-" selected="selected">-</option>
                            {foreach from=$continent item=line}
                                <option value="{$line.continent_id}">{$line.continent_name}</option>
                            {/foreach}
                        </select>
                        <b>Continent</b>
                        <br>
                        <select name="game_extra_info_pub" class="standard_select select_medium">
                            <option value="-" selected="selected">-</option>
                            {foreach from=$game_extra_info item=line}
                                <option value="{$line.game_extra_info_id}">{$line.game_extra_info}</option>
                            {/foreach}
                        </select>
                        <b>Extra Info</b>
                        <br><br>
                        <input type="hidden" name="game_id" value="{$game_id}">
                        <input type="button" value="Add" onclick="add_publisher()" class="secondary_button">
                    </form>
                </fieldset>
                </div>
            </div>
            <div id="gd_bottom">
                <div id="gd_back">
                    <div class="standard_tile_text_center"><a href="javascript:history.go(-1)" class="standard_tile_link">back</a></div>
                </div>
            </div>
        </div>
    {else}
        <div class="standard_tile_line"></div>
        <div class="standard_tile_padding">
            <div class="left_nav_section">
                Game not available
            </div>
        </div>
        <div id="gd_bottom">
            <div id="gd_back">
                <div class="standard_tile_text_center"><a href="javascript:history.go(-1)" class="standard_tile_link">back</a></div>
            </div>
        </div>
    {/if}
</div>
{/block}
