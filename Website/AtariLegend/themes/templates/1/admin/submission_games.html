{*
/***************************************************************************
*                            submissions_games.html
*                            --------------------------
*   begin                : Thursday, Septembre 29, 2005
*   copyright            : (C) 2005 Atari Legend
*   email                : admin@atarilegend.com
*
*   Id: submissions_games.html,v 0.10 ?
*   Id: submissions_games.html,v 0.20 2016/07/27 22:06 Grave
*                       - AL 2.0
*   Id: submissions_games.html,v 0.21 2017/04/28 23:19 Grave
*                       - Added font awesome and updated layout
*   Id: submissions_games.html,v 1.22 2017/09/08 STG
*                       - Enhanced for submissions with screenshots
*
***************************************************************************/

************************************************************************************************
The main game submission page
************************************************************************************************
*}

{extends file='1/admin/frontpage.html'}

{block name=java_script}
<script>
function commentdelete(JSsubID)
{
    JSview = "{$structure.list}";
    JSv_count = {$structure.v_counter};

        // CONFIRM REQUIRES ONE ARGUMENT
        var message = "Are you sure you want to delete this submission?";
        // CONFIRM IS BOOLEAN. THAT MEANS THAT
        // IT RETURNS TRUE IF 'OK' IS CLICKED
        // OTHERWISE IT RETURN FALSE
        var return_value = confirm(message);

        if (return_value !="0")
        {
            url="../games/db_games_submissions.php?action=delete_submission&submit_id="+JSsubID+"&v_counter="+JSv_count+"&list="+JSview+""
            location.href=url;
        }
}

function submovetocomment(JSsubID)
{
    JSview = "{$structure.list}";
    JSv_count = {$structure.v_counter};

        // CONFIRM REQUIRES ONE ARGUMENT
        var message = "Are you sure you want to move this submission to comments?";
        // CONFIRM IS BOOLEAN. THAT MEANS THAT
        // IT RETURNS TRUE IF 'OK' IS CLICKED
        // OTHERWISE IT RETURN FALSE
        var return_value = confirm(message);

        if (return_value !="0")
        {
            url="../games/db_games_submissions.php?action=move_submission_tocomment&submit_id="+JSsubID+"&v_counter="+JSv_count+"&list="+JSview+""
            location.href=url;
        }
}
</script>
<!-- lightbox screenshot pop up script -->
<script src="{$template_dir}includes/js/vendor/lightbox-2.9.0.min.js"></script>
<link type="text/css" href="{$style_dir}css/vendor/lightbox-2.9.0.css" hreflang="en" rel="stylesheet">

<script>
    lightbox.option({
        'showImageNumberLabel': false
    })
</script>
{/block}

{block name=title}Game Submissions{/block}

{block name=main_tile}
<link rel="stylesheet" href="{$style_dir}css/vendor/font-awesome-4.7.0/css/font-awesome.min.css"> <!-- Font awesome for icons-->

<div class="standard_tile" id="games_submissions">
    <div class="help-tip">
        <p><i class="fa fa-envelope" aria-hidden="true"></i> - mail to <br>
            <i class="fa fa-trash" aria-hidden="true"></i> - delete submission<br>
            <i class="fa fa-check-square" aria-hidden="true"></i> - move to DONE list<br>
            <i class="fa fa-comment" aria-hidden="true"></i> - move to COMMENTS<br>
            <i class="fa fa-arrow-up" aria-hidden="true"></i> - back to top
        </p>
    </div>
    <h1>GAME SUBMISSIONS</h1>
    <div class="standard_tile_line"></div>
        <div class="standard_tile_padding">
            <div class="left_nav_section">
                    When you have finished reviewing the submitted data move the submission to the "Done list" by clicking the appropriate Done button.
                    Users have submitted a total of <b>{$total_nr_submissions}</b> entries in the AL database!
        </div>
        <br><br>
        <div class="standard_tile_text_center">
            {if $structure.list == 'current'}
                <a href="../games/submission_games.php?list=done" class="standard_tile_link">Switch to Done list</a><br/>
            {elseif $structure.list == 'done'}
                <strong><a href="../games/submission_games.php?list=current" class="standard_tile_link">Switch to Current list</a></strong><br/>
            {/if}
        </div>
        <br>
        <div class="standard_tile_text_center">
            {if $structure.v_counter > 0}
                <a href ="../games/submission_games.php?list={$structure.list}&amp;v_counter={$structure.back_arrow}" class="standard_tile_link">Previous</a> |
            {/if}
            {if $structure.forward_arrow >= 25}
                <a href="../games/submission_games.php?list={$structure.list}&amp;v_counter={$structure.forward_arrow}" class="standard_tile_link">Next</a>
            {/if}
        </div>
        <br>
        {* START NEW COMMENT BOX *}
        <table class="gc_table_list w-100">
        {foreach from=$submission item=line}
            <tr>
                <td class="gc_left_column w-20">
                    Random shot
                </td>
                <td class="gc_center_column w-60">
                    <a href="../games/games_detail.php?game_id={$line.game_id}" class="links_addnew_link">{$line.game_name}</a>
                </td>
                <td class="gc_right_head w-20">
                    {if $line.email != ''}
                        <a href="mailto:{$line.email}?subject=Thanks%20for%20the%20submission%20on%20{$line.email_game}%20at%20Atari%20Legend" class="links_addnew_link"><i class="fa fa-envelope" aria-hidden="true"></i></a>
                    {/if}
                    <a href="#" onClick="commentdelete({$line.submit_id})" style="cursor: pointer;" class="links_addnew_link"><i class="fa fa-trash" aria-hidden="true"></i></a>
                    {if $structure.list == 'current'}
                        <a href="../games/db_games_submissions.php?action=update_submission&amp;submit_id={$line.submit_id}&amp;list={$structure.list}&amp;v_counter={$structure.v_counter}" class="links_addnew_link"><i class="fa fa-check-square" aria-hidden="true"></i></a>
                    {/if}
                    <a href="#" onClick="submovetocomment({$line.submit_id})" style="cursor: pointer;" class="links_addnew_link"><i class="fa fa-comment" aria-hidden="true"></i></a>
                    <a href="#top" class="links_addnew_link"><i class="fa fa-arrow-up" aria-hidden="true"></i></a>
                </td>
            </tr>
            <tr>
                <td class="gc_left_column w-20">
                    {if isset($line.image) and $line.image != ''}
                        <a href="../games/games_detail.php?game_id={$line.game_id}">
                            <img src="../../includes/show_image.php?file={$line.image}&amp;resize=160,null,null,null" alt="{$line.game_name}" class="user_stats_img_dark"/>
                        </a>
                    {/if}
                    <br>
                    Joined: {$line.user_joindate}
                    <br>
                    Comments: {if $line.user_comment_nr eq 0} {$line.user_comment_nr} {else}<a href="../games/games_comment.php?c_counter={$structure.v_counter}&amp;users_id={$line.user_id}&amp;view=users_comments" class="links_addnew_link">{$line.user_comment_nr}</a>{/if}
                    <br>
                    Submissions: {$line.usersubmit_number}
                    <br>
                    Karma: {$line.karma}
                </td>
                <td class="gc_center_column w-80" colspan="2">
                    Posted by <a href="../user/user_detail.php?user_id_selected={$line.user_id}" class="standard_tile_link_black">{$line.user_name}</a> on {$line.date}
                    <br>
                    <br>
                    {$line.comment}
                    <br>
                    <br>
                    {if isset($submission_screenshots)}
                        {foreach from=$submission_screenshots item=line_screen}
                            {if $line.submit_id == $line_screen.game_submitinfo_id}
                                <a href="../../includes/show_image.php?file={$line_screen.game_submitinfo_screenshot}&amp;resize=410,null,null,null" data-lightbox="image-1">
                                    <img src="../../includes/show_image.php?file={$line_screen.game_submitinfo_screenshot}&amp;resize=170,null,null,null" alt="Click to enlarge!" style="display:inline;" class="game_screenshot_img">
                                </a>
                            {/if}
                        {/foreach}
                    {/if}
                </td>
            </tr>
        {/foreach}
        </table>
        {* END NEW COMMENT BOX *}
        <br>
        <div class="standard_tile_text_center">
            {if $structure.v_counter > 0}
                <a href ="../games/submission_games.php?list={$structure.list}&amp;v_counter={$structure.back_arrow}" class="standard_tile_link">Previous</a> |
            {/if}
            {if $structure.forward_arrow >= 25}
                <a href="../games/submission_games.php?list={$structure.list}&amp;v_counter={$structure.forward_arrow}" class="standard_tile_link">Next</a>
            {/if}
        </div>
    </div>
</div>
{/block}
