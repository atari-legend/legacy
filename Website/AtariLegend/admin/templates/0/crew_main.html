{* 
/***************************************************************************
                              crew_main.tpl
*                            --------------------------
*   begin                : Sunday, August 28, 2005
*   copyright            : (C) 2005 Atari Legend
*   email                : admin@atarilegend.com
*
*   Id: crew_main.tpl,v 0.10 2005/10/29 Silver
*
***************************************************************************/

************************************************************************************************
The main game page
************************************************************************************************
*}
{extends file='head.html'}
{block name=head}
<script type="text/javascript">
function crewinsert()
{
    JSnewcrew=document.forms["insertcrew"].newcrew.value;
	
	if (JSnewcrew=='')
	{
		alert('Please fill in a crew name');
	}
	else
	{
    	// CONFIRM REQUIRES ONE ARGUMENT
    	var message = "Are you sure you want to insert this crew into the database?";
    	// CONFIRM IS BOOLEAN. THAT MEANS THAT
    	// IT RETURNS TRUE IF 'OK' IS CLICKED
    	// OTHERWISE IT RETURN FALSE
    	var return_value = confirm(message);
		
    	if (return_value !="0")
    	{
    		url="db_crew.php?new_crew="+JSnewcrew+"&action=insert_crew";
			location.href=url;
    	} 
	}
}
function browseCrew(str) {
    if (str == "") {
        document.getElementById("crew_list").innerHTML = "";
        return;
    } else { 
        if (window.XMLHttpRequest) {
            // code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        } else {
            // code for IE6, IE5
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange = function() {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                document.getElementById("crew_list").innerHTML = xmlhttp.responseText;
            }
        }
        xmlhttp.open("GET","../crew/ajax_crew_search.php?action=crew_browse&query="+str,true);
        xmlhttp.send();
    }
}
function searchCrew(str) {
    if (str == "") {
        str = "empty";
			xmlhttp.onreadystatechange = function() {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                document.getElementById("crew_list").innerHTML = xmlhttp.responseText;
            }
        }   

    } else { 
        if (window.XMLHttpRequest) {
            // code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        } else {
            // code for IE6, IE5
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange = function() {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                document.getElementById("crew_list").innerHTML = xmlhttp.responseText;
            }
        }
        xmlhttp.open("GET","../crew/ajax_crew_search.php?action=crew_search&query="+str,true);
        xmlhttp.send();
    }
}
</script>
{/block}
{block name=title}Crew editor{/block}
{block name=quicklinks}
		<br/>
		
		{* Search crew section *}
		<div class="quicklinkbox">
		<b>Crew Editor</b><br/>
		<br/>
		Search for crew:<br/>
		<form action="../crew/crew_editor.php" method="get" name="post_menu_crew_set" id="menu_crew_set">
		<select name="crewbrowse" size="1" style="margin-top:5px;margin-bottom:5px;vertical-align:top;background-color:white;" onchange="browseCrew(this.value)">
			{html_options values=$az_value output=$az_output}
		</select>
		<input type="text" name="crewsearch" value="" onkeyup="searchCrew(this.value)" style="margin-top:5px;margin-bottom:5px;vertical-align:top;background-color:white;width:147px;">
		{* Ajax *}
		<div id="crew_list">
		<select name="crew_select" id="CrewList" size="8" style="width:200px;">
			{foreach from=$crew item=line}	
				{html_options values=$line.crew_id output=$line.crew_name}
			{/foreach}
		</select>
		</div>
		<input type="submit" value="Select" style="margin:5px;vertical-align:top;">
		</form>
		
		
		<br/>

		<hr>
		<br/>
		{* Add crew section *}
		Add new Crew to db:
		<form method="post" name="insertcrew">
		<input type="text" name="newcrew" value="" style="margin:5px; width:200px;"><br/>
		<input type="submit" value="Insert" style="margin:5px;vertical-align:top;" onClick="crewinsert(); return false;">
		</form>
		</div>
		<hr>
		{* END crew section *}
		<br/><br/> 
{/block}
{block name=body}
<div class="NEWMAINCELL" style="text-align:center;">
	<fieldset class="interview_set">
		In this section you can add or edit a crew. Search for a crew by using any of the 
		functionalities below. 
	</fieldset> 
<br/><br/>
	
	{if (isset($new_crew) and $new_crew <> '')}<div class="message_box">{$new_crew} added to the database!</div><br/>{/if}
	<br/><br/>

{if isset($message)}
	<div class="message_box">{$message}</div>
{/if}
</div>
{/block}
