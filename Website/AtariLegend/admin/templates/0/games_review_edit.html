{* 
/***************************************************************************
*                                games_review_edit.tpl
*                            --------------------------
*   begin                : Sunday, december 04, 2005
*   copyright            : (C) 2005 Atari Legend
*   email                : maarten.martens@freebel.net
*   actual update        : created this page
*
*   Id: games_review_edit.tpl,v 0.10 2005/12/04 Gatekeeper
*
***************************************************************************/

///****************************************************************************************
// This is the sub template file to generate the reviews edit page
//**************************************************************************************** 
*}
{extends file='head.html'}
{block name=head}
<script type="text/javascript">
function deletereview(reviewid, gameid)
{	
	// CONFIRM REQUIRES ONE ARGUMENT
    var message = "Are you sure you want to delete this review?";
    // CONFIRM IS BOOLEAN. THAT MEANS THAT
    // IT RETURNS TRUE IF 'OK' IS CLICKED
    // OTHERWISE IT RETURN FALSE
    var return_value = confirm(message);
	if (return_value !="0")
    {
      	url="db_games_review_edit.php?reviewid="+reviewid+"&game_id="+gameid+"&action=delete_review";
		location.href=url;
    }
}

function move_to_comment(reviewid, gameid)
{	
	// CONFIRM REQUIRES ONE ARGUMENT
    var message = "Are you sure you want to move this review to the comments section? Some content will be deleted in the moving process.";
    // CONFIRM IS BOOLEAN. THAT MEANS THAT
    // IT RETURNS TRUE IF 'OK' IS CLICKED
    // OTHERWISE IT RETURN FALSE
    var return_value = confirm(message);
	if (return_value !="0")
    {
      	url="db_games_review_edit.php?reviewid="+reviewid+"&game_id="+gameid+"&action=move_to_comment";
		location.href=url;
    }
}

function deletecomment(game_id,reviewid,screenshot_id)
{	
	// CONFIRM REQUIRES ONE ARGUMENT
     var message = "Are you sure you want to delete this comment?";
    // CONFIRM IS BOOLEAN. THAT MEANS THAT
    // IT RETURNS TRUE IF 'OK' IS CLICKED
    // OTHERWISE IT RETURN FALSE
     var return_value = confirm(message);
	 if (return_value !="0")
     {
      	url="db_games_review_edit.php?game_id="+game_id+"&reviewid="+reviewid+"&screenshot_id="+screenshot_id+"&action=delete_comment";
		location.href=url;
     }
}
</script>
{/block}
{block name=title}Edit review - <a href="../games/games_detail.php?game_id={$game.game_id}" class="MAINNAV_WHITE">{$game.game_name}</a>{/block}
{block name=body}
<div class="NEWMAINCELL">
	<form action="../games/db_games_review_edit.php" method="post" name="post">
	<fieldset class="interview_set">
		At this page you can edit or delete an existing review in the AL database.
	</fieldset> 
	<br/>
	<br/>

		<fieldset class="game_set" style="padding:10px;">
		<legend class="links_legend">Other reviews</legend>

				{foreach from=$review item=line}
					<b>Review {$line.review_nr} :: <a href="../games/games_review_edit.php?reviewid={$line.review_id}&amp;game_id={$game.game_id}" class="MAINNAV">Edit</a> :: <a href="../games/games_review_preview.php?review_id={$line.review_id}&amp;game_id={$game.game_id}" class="MAINNAV"> Preview </a>by {$line.user_name}</b><br/>
				{/foreach}	

		</fieldset>

	<br/>
	<br/>

			<div style="width:100px;display:inline-block;"><b>Written by :</b></div>

			<select name="members" class="links_selector" style="margin-left:10px;">
				<option value="-" selected>-</option>
				{foreach from=$authors item=line}
					{if $edit_review.member_id == $line.user_id}
						<option value="{$line.user_id}" SELECTED>{$line.user_name}</option>
					{else}
						<option value="{$line.user_id}">{$line.user_name}</option>
					{/if}
				{/foreach}	
			</select>

			<br/>
			<div style="width:100px;display:inline-block;"><b>Date :</b></div>

			{html_select_date time=$edit_review.review_date start_year="2000"}

			<br/>
			<br/>
			<b>Review :</b><br/>

			<br/>
			<div class="smileybox">
			<input type="button" accesskey= "b" name="addbbcode0" value="B" onclick="bbstyle(0,'textfield')" onMouseOver="helpline('b')" />
			<input type="button" accesskey= "u" name="addbbcode4" value="U" onclick="bbstyle(4,'textfield')" onMouseOver="helpline('u')" />
			<input type="button" accesskey= "i" name="addbbcode2" value="I" onclick="bbstyle(2,'textfield')" onMouseOver="helpline('i')" />
			<input type="button" accesskey="w" name="addbbcode6" value="URL" onClick="bbstyle(6,'textfield')" onMouseOver="helpline('h')" />			  
			<input type="button" accesskey="x" name="addbbcode8" value="@" onClick="bbstyle(8,'textfield')" onMouseOver="helpline('e')" />			  			
			<input type="button" accesskey= "t" name="addbbcode12" value="Hotspot Target" onclick="bbstyle(12,'textfield')" onMouseOver="helpline('t')" />		 
			&nbsp;
			&nbsp;
			<a href="javascript:setsmileyn(' :-D ')"><img src="../templates/0/emoticons/icon_biggrin.gif" alt="Very Happy" onMouseOver="helpline('x')"></a>
			<a href="javascript:setsmileyn(' :) ')"><img src="../templates/0/emoticons/icon_smile.gif" alt="Smile" onMouseOver="helpline('x')"></a>
			<a href="javascript:setsmileyn(' :( ')"><img src="../templates/0/emoticons/icon_sad.gif" alt="sad" onMouseOver="helpline('x')"></a> 
			<a href="javascript:setsmileyn(' 8O ')"><img src="../templates/0/emoticons/icon_eek.gif" alt="shocked" onMouseOver="helpline('x')"></a>
			<a href="javascript:setsmileyn(' :? ')"><img src="../templates/0/emoticons/icon_confused.gif" alt="confused" onMouseOver="helpline('x')"></a>
			<a href="javascript:setsmileyn(' 8)')"><img src="../templates/0/emoticons/icon_cool.gif" alt="Cool" onMouseOver="helpline('x')"></a>
			<a href="javascript:setsmileyn(' :x ')"><img src="../templates/0/emoticons/icon_mad.gif" alt="Mad" onMouseOver="helpline('x')"></a>
			<a href="javascript:setsmileyn(' :P ')"><img src="../templates/0/emoticons/icon_razz.gif" alt="Razz" onMouseOver="helpline('x')"></a>
			<a href="javascript:setsmileyn(' :oops: ')"><img src="../templates/0/emoticons/icon_redface.gif" alt="Embarassed" onMouseOver="helpline('x')"></a>
			<a href="javascript:setsmileyn(' :evil: ')"><img src="../templates/0/emoticons/icon_evil.gif" alt="Evil or Very mad" onMouseOver="helpline('x')"></a>
			<a href="javascript:setsmileyn(' :twisted: ')"><img src="../templates/0/emoticons/icon_twisted.gif" alt="Twisted Evil" onMouseOver="helpline('x')"></a>
			<a href="javascript:setsmileyn(' :roll: ')"><img src="../templates/0/emoticons/icon_rolleyes.gif" alt="Rolling eyes" onMouseOver="helpline('x')"></a>
			<a href="javascript:setsmileyn(' :frown: ')"><img src="../templates/0/emoticons/icon_frown.gif" alt="Frowning" onMouseOver="helpline('x')"></a>
			<a href="javascript:setsmileyn(' :| ')"><img src="../templates/0/emoticons/icon_neutral.gif" alt="Neutral" onMouseOver="helpline('x')"></a>
			<a href="javascript:setsmileyn(' :mrgreen: ')"><img src="../templates/0/emoticons/icon_mrgreen.gif" alt="Mr. Green" onMouseOver="helpline('x')"></a>
			<a href="javascript:setsmileyn(' :o ')"><img src="../templates/0/emoticons/icon_surprised.gif" alt="Surprised" onMouseOver="helpline('x')"></a>
			<a href="javascript:setsmileyn(' :lol: ')"><img src="../templates/0/emoticons/icon_lol.gif" alt="Laughing" onMouseOver="helpline('x')"></a>
			<a href="javascript:setsmileyn(' :cry: ')"><img src="../templates/0/emoticons/icon_cry.gif" alt="Crying or Very sad" onMouseOver="helpline('x')"></a>
			<a href="javascript:setsmileyn(' :wink: ')"><img src="../templates/0/emoticons/icon_wink.gif" alt="Wink" onMouseOver="helpline('x')"></a>
			<a href="javascript:setsmileyn(' :!: ')"><img src="../templates/0/emoticons/icon_exclaim.gif" alt="Exclamation" onMouseOver="helpline('x')"></a>
			<a href="javascript:setsmileyn(' :arrow: ')"><img src="../templates/0/emoticons/icon_arrow.gif" alt="smilie" onMouseOver="helpline('x')"></a>
			<a href="javascript:setsmileyn(' :?: ')"><img src="../templates/0/emoticons/icon_question.gif" alt="Question" onMouseOver="helpline('x')"></a>
			<a href="javascript:setsmileyn(' :idea: ')"><img src="../templates/0/emoticons/icon_idea.gif" alt="Idea" onMouseOver="helpline('x')"></a>
			&nbsp;<input type="text" size="50" name="helpbox" maxlength="100" style="float:right;font-size:10px; border=0px; background-color:#D0D1DF" value="Tip: Styles can be applied quickly to selected text." />
			</div>

			<textarea name="textfield" ONSELECT="javascript:storeCaret(this);" ONCLICK="javascript:storeCaret(this);" ONKEYUP="javascript:storeCaret(this);" ONCHANGE="javascript:storeCaret(this);" rows="15" class="textarea_interviews">{$edit_review.review_text}</textarea>

	<br/><br/>
	<br/>
	<div style="display:flex;justify-content: space-around;">
			<div><b>Graphics :</b> &nbsp;<input type="text" name="graphics" class="gamescore" value="{$edit_review.review_graphics}"></div>

			<div><b>Sound :</b> &nbsp;<input type="text" name="sound" class="gamescore" value="{$edit_review.review_sound}"></div>

			<div><b>Gameplay :</b> &nbsp;<input type="text" name="gameplay" class="gamescore"  value="{$edit_review.review_gameplay}"></div>

			<div><b>Conclusion :</b> &nbsp;<input type="text" name="conclusion" class="gamescore"  value="{$edit_review.review_overall}"></div>
	</div>
		

		<br/>
		<br/>
		<fieldset class="interview_set_screenshot" style="text-align:center;">
		<legend class="links_legend">Screenshots</legend>
		<br/>
		{if $screenshots_nr <> 0}
			{foreach from=$screenshots item=line} 
			<div class="smileybox">
				<img src="../includes/show_image.php?file={$line.screenshot_link}&amp;resize=120,null,null,null" alt="{$line.screenshot_comment}">
				<input class="review_input" type="text" name="inputfield[]" value="{$line.screenshot_comment}">
				<br/>
				<a href="javascript:deletecomment({$game.game_id},{$reviewid},{$line.screenshot_id})" class="MAINNAV">
					delete comment
				</a>
			</div>
				
				<br/>
			{/foreach}
		{else}
			There are currently no screenshots attached to this game. Go to the<a href="../games/games_detail.php?game_id={$game.game_id}" class="MAINNAV"> screenshot adding</a>
			page to link specific screenshots to this game. 
		{/if}
		</fieldset> 																																																																																																																																																																										


			<br/>
			<br/>
			<input type="hidden" name="action" value="edit_review">
			<input type="hidden" name="game_id" value="{$game.game_id}">
			<input type="hidden" name="reviewid" value="{$reviewid}">
			<input type="submit" name="Create Review" value="Edit Review" style="padding:2px;">
			<input type="button" name="delete" value="Delete review" onclick="deletereview({$reviewid},{$game.game_id})" style="padding:2px;">
			<input type="button" name="delete" value="Move to Comments" onclick="move_to_comment({$reviewid},{$game.game_id})" style="padding:2px;">

<br/><br/>
<div class="back_button"><a href="javascript:history.go(-1)" class="MAINNAV">back</a></div>
<br/>
{if isset($message)}
	<div class="message_box">{$message}</div>
{/if}
</form>
</div>
{/block}
